exports.id=672,exports.ids=[672],exports.modules={979:()=>{},1779:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>h});var d=c(8732),e=c(2341),f=c.n(e);class g extends f(){render(){return(0,d.jsxs)(e.Html,{lang:"es",children:[(0,d.jsxs)(e.Head,{children:[(0,d.jsx)("link",{rel:"icon",href:"/assets/img/ico1.ico",type:"image/x-icon"}),(0,d.jsx)("link",{href:"https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap",rel:"stylesheet"}),(0,d.jsx)("link",{rel:"stylesheet",href:"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"}),(0,d.jsx)("meta",{name:"theme-color",content:"#f39c12"})]}),(0,d.jsxs)("body",{children:[(0,d.jsx)(e.Main,{}),(0,d.jsx)(e.NextScript,{})]})]})}}let h=g},1857:(a,b,c)=>{"use strict";c.a(a,async(a,d)=>{try{c.d(b,{H0:()=>g,Ik:()=>i,M3:()=>l,Re:()=>h,Rp:()=>k,gV:()=>j,td:()=>m});var e=c(1428),f=a([e]);e=(f.then?(await f)():f)[0];let g=async(a,b,c)=>{try{if(!a||!b||!c)throw Error("Faltan par\xe1metros obligatorios: telefono, mensaje o apiKey");let d=encodeURIComponent(b),f=`https://api.callmebot.com/whatsapp.php?phone=${a}&text=${d}&apikey=${c}`;console.log("Enviando mensaje a WhatsApp...",f);let g=await e.default.get(f,{timeout:3e4,validateStatus:function(a){return a>=200&&a<500}});if(console.log("Respuesta de la API:",g.data),g.data&&"string"==typeof g.data&&g.data.includes("ERROR"))throw Error(`Error de CallMeBot: ${g.data}`);return{success:!0,message:"Mensaje enviado correctamente",data:g.data}}catch(b){console.error("Error al enviar mensaje de WhatsApp:",b);let a="Error desconocido";return a="ECONNABORTED"===b.code?"Tiempo de espera agotado al intentar enviar el mensaje":b.message.includes("Network Error")?"Error de red: No se pudo conectar con el servidor de WhatsApp. Verifique su conexi\xf3n a internet.":b.response?`Error del servidor: ${b.response.data||b.response.statusText}`:b.message,{success:!1,message:a,error:b}}},h=(a,b)=>`
🚨 *SERVICIO ASIGNADO* 🚨
Hola ${b.nombre} ${b.ap_paterno||""}, se te ha asignado un nuevo servicio:
📋 *Detalles del Servicio:*
Folio: ${a.n_folio||"Sin folio"}
Tipo: ${a.tipo_servicio||"No especificado"}
Fecha: ${a.fecha_creacion?.split("T")[0]||new Date().toISOString().split("T")[0]}
Hora: ${a.hora_creacion||new Date().toLocaleTimeString()}
🚗 *Veh\xedculo:*
${a.marca||""} ${a.modelo||""} ${a.anio||""}
Color: ${a.color||"No especificado"}
Placas: ${a.placas||"No especificado"}
👤 *Solicitante:*
Nombre: ${a.as_nombre||"No especificado"}
📍 *Ubicaci\xf3n:*
Origen: ${a.direccion_origen||"No especificado"}
🏁 *Destino:*
${a.direccion_destino||"No especificado"}
Por favor, confirma que has recibido esta notificaci\xf3n respondiendo a este mensaje.
`,i=(a,b)=>`
✅ *SERVICIO INICIADO* ✅
${b.nombre} ${b.ap_paterno||""}, el servicio ${a.n_folio||"Sin folio"} ha sido iniciado.
🚗 *Datos del veh\xedculo:*
${a.marca||""} ${a.modelo||""} ${a.color||""}
Placas: ${a.placas||"No especificado"}
👤 *Contacto del solicitante:*
${a.as_nombre||"No especificado"}
Por favor, mant\xe9n actualizado al cliente sobre el progreso del servicio.
`,j=(a,b)=>`
⏰ *RECORDATORIO DE SERVICIO* ⏰
${b.nombre} ${b.ap_paterno||""}, tienes un servicio pendiente:
Folio: ${a.n_folio||"Sin folio"}
Veh\xedculo: ${a.marca||""} ${a.modelo||""} ${a.color||""}
Placas: ${a.placas||"No especificado"}
Origen: ${a.direccion_origen||"No especificado"}
Por favor, confirma si ya est\xe1s en camino o si necesitas apoyo.
`,k=(a,b,c=0)=>`
🏁 *SERVICIO COMPLETADO* 🏁
El servicio ${a.n_folio||"Sin folio"} ha sido marcado como completado.
Detalles:
- Cliente: ${a.nombre_cliente||"No especificado"}
- Veh\xedculo: ${a.marca||""} ${a.modelo||""}
- Placas: ${a.placas||"No especificado"}
Gracias por tu trabajo, ${b.nombre} ${b.ap_paterno||""}.
`,l=(a,b)=>`
🔄 *SERVICIO REASIGNADO* 🔄
Hola ${b.nombre} ${b.ap_paterno||""}, se te ha reasignado el servicio ${a.n_folio||"Sin folio"} que estaba asignado previamente a otro operador.
📋 *Detalles del Servicio:*
Tipo: ${a.tipo_servicio||"No especificado"}
Veh\xedculo: ${a.marca||""} ${a.modelo||""} ${a.color||""}
Placas: ${a.placas||"No especificado"}
👤 *Solicitante:*
Nombre: ${a.as_nombre||"No especificado"}
📍 *Ubicaci\xf3n:*
Origen: ${a.direccion_origen||"No especificado"}
Destino: ${a.direccion_destino||"No especificado"}
Por favor, confirma que has recibido esta notificaci\xf3n y dir\xedgete al lugar lo antes posible.
`,m=(a,b)=>`
❌ *SERVICIO CANCELADO* ❌
${b.nombre} ${b.ap_paterno||""}, el servicio ${a.n_folio||"Sin folio"} ha sido cancelado.
Detalles:
- Veh\xedculo: ${a.marca||""} ${a.modelo||""} ${a.color||""}
- Placas: ${a.placas||"No especificado"}
- Origen: ${a.direccion_origen||"No especificado"}
No es necesario que acudas al lugar. Si ya estabas en camino, por favor regresa a tu base.
`;d()}catch(a){d(a)}})},2081:(a,b,c)=>{"use strict";c.a(a,async(a,d)=>{try{c.r(b),c.d(b,{default:()=>h});var e=c(8732);c(7542),c(979),c(4170);var f=c(4842),g=a([f]);f=(g.then?(await g)():g)[0];let h=function({Component:a,pageProps:b}){return(0,e.jsx)(f.O,{children:(0,e.jsx)("div",{className:"app-container",children:(0,e.jsx)(a,{...b})})})};d()}catch(a){d(a)}})},4170:()=>{},4842:(a,b,c)=>{"use strict";c.a(a,async(a,d)=>{try{c.d(b,{A:()=>l,O:()=>k});var e=c(8732),f=c(2015),g=c(6958),h=c(5876),i=a([g,h]);[g,h]=i.then?(await i)():i;let j=(0,f.createContext)(void 0),k=({children:a})=>{let[b,c]=(0,f.useState)(null),[d,i]=(0,f.useState)(!0),[k,l]=(0,f.useState)(null),[m,n]=(0,f.useState)(!1);(0,f.useEffect)(()=>{let a=(0,g.onAuthStateChanged)(h.j,a=>{c(a),a?n(a.email?.endsWith("@admin.ama.mx")||!1):n(!1),i(!1)});return()=>a()},[]);let o=async(a,b)=>{i(!0);try{await (0,g.signInWithEmailAndPassword)(h.j,a,b),l(null)}catch(a){l(a instanceof Error?a.message:"Error al iniciar sesi\xf3n"),console.error("Error al iniciar sesi\xf3n:",a)}finally{i(!1)}},p=async()=>{i(!0);try{let a=new g.GoogleAuthProvider;await (0,g.signInWithPopup)(h.j,a),l(null)}catch(a){l(a instanceof Error?a.message:"Error al iniciar sesi\xf3n con Google"),console.error("Error al iniciar sesi\xf3n con Google:",a)}finally{i(!1)}},q=async()=>{i(!0);try{await (0,g.signOut)(h.j),l(null)}catch(a){l(a instanceof Error?a.message:"Error al cerrar sesi\xf3n"),console.error("Error al cerrar sesi\xf3n:",a)}finally{i(!1)}};return(0,e.jsx)(j.Provider,{value:{user:b,loading:d,error:k,isAdmin:m,iniciarSesionConEmail:o,iniciarSesionConGoogle:p,cerrarSesion:q},children:!d&&a})},l=()=>{let a=(0,f.useContext)(j);if(!a)throw Error("useAuth debe ser usado dentro de un AuthProvider");return a};d()}catch(a){d(a)}})},5876:(a,b,c)=>{"use strict";c.a(a,async(a,d)=>{try{c.d(b,{A:()=>j,j:()=>i});var e=c(6551),f=c(6958),g=a([e,f]);[e,f]=g.then?(await g)():g;let h=(0,e.initializeApp)({apiKey:"AIzaSyDH8du-Pdl5OshdUpJP2U-J-yfeUQMfbWE",authDomain:"gruas-d5b00.firebaseapp.com",projectId:"gruas-d5b00",storageBucket:"gruas-d5b00.appspot.com",messagingSenderId:"790191029265",appId:"1:790191029265:web:567c266f135ee20b6ec5b0",measurementId:"G-BCWQKC6ZRV"}),i=(0,f.getAuth)(h),j=h;d()}catch(a){d(a)}})},7206:a=>{a.exports={modalOverlay:"_modalcotizaciones_modalOverlay__TBZFi",modalContent:"_modalcotizaciones_modalContent__iaLWT",reasignarOverlay:"_modalcotizaciones_reasignarOverlay__jFCxB",reasignarDialog:"_modalcotizaciones_reasignarDialog__q_tEh",reasignarButtons:"_modalcotizaciones_reasignarButtons__VJCsV",modalHeader:"_modalcotizaciones_modalHeader__6WNOK",estadoBadge:"_modalcotizaciones_estadoBadge__m_BaP",estadoPendiente:"_modalcotizaciones_estadoPendiente__B3NNy",estadoAsignado:"_modalcotizaciones_estadoAsignado__X1pIH",estadoEnprogreso:"_modalcotizaciones_estadoEnprogreso__1RrX3",estadoIniciado:"_modalcotizaciones_estadoIniciado__NiBAl",estadoCompletado:"_modalcotizaciones_estadoCompletado__KQLB9",estadoCancelado:"_modalcotizaciones_estadoCancelado__kxeNH",tabsContainer:"_modalcotizaciones_tabsContainer__ts_FA",tab:"_modalcotizaciones_tab__LULMk",tabActive:"_modalcotizaciones_tabActive__I4Hx7",modalBody:"_modalcotizaciones_modalBody__zok_H",serviceDetails:"_modalcotizaciones_serviceDetails__4dNPK",infoSection:"_modalcotizaciones_infoSection__2jBSZ",infoGrid:"_modalcotizaciones_infoGrid__5V_cT",infoItem:"_modalcotizaciones_infoItem__E8mRL",fullWidth:"_modalcotizaciones_fullWidth__TQY5f",precio:"_modalcotizaciones_precio__0QfTI",placas:"_modalcotizaciones_placas__aclPe",closeBtn:"_modalcotizaciones_closeBtn__qcRld",selectContainer:"_modalcotizaciones_selectContainer__b2i1T",selectOperador:"_modalcotizaciones_selectOperador__oOXCO",selectArrow:"_modalcotizaciones_selectArrow__VvznB",operatorPreview:"_modalcotizaciones_operatorPreview__PSt1p",inputWithIcon:"_modalcotizaciones_inputWithIcon__rP_rU",input:"_modalcotizaciones_input__5s4se",error:"_modalcotizaciones_error__KHc8j",shake:"_modalcotizaciones_shake__EtB2G",costDetails:"_modalcotizaciones_costDetails__WUVMU",confirmPoliza:"_modalcotizaciones_confirmPoliza__ay39Y",costosGrid:"_modalcotizaciones_costosGrid__x2CwV",costoItem:"_modalcotizaciones_costoItem__wXA__",costConfirmed:"_modalcotizaciones_costConfirmed__T3_yl",polizaConfirmada:"_modalcotizaciones_polizaConfirmada__dNaBq",polizaError:"_modalcotizaciones_polizaError__Dx5dh",polizaInputs:"_modalcotizaciones_polizaInputs__i1Wli",inputGroup:"_modalcotizaciones_inputGroup__Dt9zH",totales:"_modalcotizaciones_totales__OtRsQ",totalesGrid:"_modalcotizaciones_totalesGrid__FBaBF",totalItem:"_modalcotizaciones_totalItem__ccZU3",totalFinal:"_modalcotizaciones_totalFinal__ag88H",actionContainer:"_modalcotizaciones_actionContainer__eNuW0",actionButtons:"_modalcotizaciones_actionButtons__DbTG8",btnAction:"_modalcotizaciones_btnAction__dMkhe",btnAsignar:"_modalcotizaciones_btnAsignar__krppO",btnIniciar:"_modalcotizaciones_btnIniciar__nmeYd",btnCancelar:"_modalcotizaciones_btnCancelar__d1YKc",btnRecordar:"_modalcotizaciones_btnRecordar__oWTex",btnReasignar:"_modalcotizaciones_btnReasignar__We1Cb",btnConfirmarDetalles:"_modalcotizaciones_btnConfirmarDetalles__YagPX",btnConfirmarPoliza:"_modalcotizaciones_btnConfirmarPoliza__zjSH4",btnCompletar:"_modalcotizaciones_btnCompletar__4Y4Le",pulse:"_modalcotizaciones_pulse__C47Fw",confirmationOverlay:"_modalcotizaciones_confirmationOverlay__Jw2yV",confirmationDialog:"_modalcotizaciones_confirmationDialog__5sjvP",confirmationButtons:"_modalcotizaciones_confirmationButtons__xT2AR",btnCancel:"_modalcotizaciones_btnCancel__gqEkl",btnConfirm:"_modalcotizaciones_btnConfirm__TIRmr",notification:"_modalcotizaciones_notification__MNWI9",notificationShow:"_modalcotizaciones_notificationShow__xPSfS",notificationSuccess:"_modalcotizaciones_notificationSuccess__G5Wb1",notificationError:"_modalcotizaciones_notificationError__rWVG_",notificationContent:"_modalcotizaciones_notificationContent__oPTRQ",historyContainer:"_modalcotizaciones_historyContainer__jRAxQ",historyItem:"_modalcotizaciones_historyItem__GYbZA",historyIcon:"_modalcotizaciones_historyIcon__v5bR_",historyContent:"_modalcotizaciones_historyContent__t7BhD",historyTitle:"_modalcotizaciones_historyTitle__dsRsQ",historyDate:"_modalcotizaciones_historyDate__SqSo1",historyDescription:"_modalcotizaciones_historyDescription__M1FFv",historyItemAsignado:"_modalcotizaciones_historyItemAsignado__uY0sn",historyItemIniciado:"_modalcotizaciones_historyItemIniciado__D5LT9",historyItemCompletado:"_modalcotizaciones_historyItemCompletado__JG_Pf",historyItemCancelado:"_modalcotizaciones_historyItemCancelado__7toA_"}},7542:()=>{},8782:(a,b,c)=>{"use strict";c.a(a,async(a,d)=>{try{c.r(b),c.d(b,{default:()=>p});var e=c(8732),f=c(2015),g=c(3220),h=c(1428),i=c(7206),j=c.n(i),k=c(1857),l=a([g,h,k]);[g,h,k]=l.then?(await l)():l;let m=({cotizacion:a})=>(0,e.jsxs)("div",{className:j().serviceDetails,children:[(0,e.jsxs)(g.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:j().infoSection,children:[(0,e.jsxs)("h3",{children:[(0,e.jsx)("i",{className:"fas fa-info-circle"})," Servicio"]}),(0,e.jsxs)("div",{className:j().infoGrid,children:[(0,e.jsxs)("div",{className:j().infoItem,children:[(0,e.jsx)("label",{className:j().label,children:"ID Cliente:"}),(0,e.jsx)("span",{children:a.id_cliente})]}),(0,e.jsxs)("div",{className:j().infoItem,children:[(0,e.jsx)("label",{className:j().label,children:"Cliente:"}),(0,e.jsx)("span",{children:a.nombre_cliente})]}),(0,e.jsxs)("div",{className:j().infoItem,children:[(0,e.jsx)("label",{className:j().label,children:"Tipo:"}),(0,e.jsx)("span",{children:a.tipo_servicio})]}),(0,e.jsxs)("div",{className:j().infoItem,children:[(0,e.jsx)("label",{className:j().label,children:"Total:"}),(0,e.jsxs)("span",{className:j().precio,children:["$",parseFloat(a.total_con_iva||"0").toFixed(2)]})]})]})]}),(0,e.jsxs)(g.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:j().infoSection,children:[(0,e.jsxs)("h3",{children:[(0,e.jsx)("i",{className:"fas fa-user"})," Solicitante"]}),(0,e.jsxs)("div",{className:j().infoGrid,children:[(0,e.jsxs)("div",{className:j().infoItem,children:[(0,e.jsx)("label",{className:j().label,children:"Nombre:"}),(0,e.jsx)("span",{children:a.as_nombre})]}),(0,e.jsxs)("div",{className:j().infoItem,children:[(0,e.jsx)("label",{className:j().label,children:"RFC:"}),(0,e.jsx)("span",{children:a.as_rfc})]})]})]}),(0,e.jsxs)(g.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:j().infoSection,children:[(0,e.jsxs)("h3",{children:[(0,e.jsx)("i",{className:"fas fa-car"})," Veh\xedculo"]}),(0,e.jsxs)("div",{className:j().infoGrid,children:[(0,e.jsxs)("div",{className:j().infoItem,children:[(0,e.jsx)("label",{className:j().label,children:"Marca/Modelo:"}),(0,e.jsxs)("span",{children:[a.marca," ",a.modelo]})]}),(0,e.jsxs)("div",{className:j().infoItem,children:[(0,e.jsx)("label",{className:j().label,children:"Color:"}),(0,e.jsx)("span",{children:a.color})]}),(0,e.jsxs)("div",{className:j().infoItem,children:[(0,e.jsx)("label",{className:j().label,children:"Placas:"}),(0,e.jsx)("span",{className:j().placas,children:a.placas})]})]})]}),(0,e.jsxs)(g.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:j().infoSection,children:[(0,e.jsxs)("h3",{children:[(0,e.jsx)("i",{className:"fas fa-map-marker-alt"})," Direcci\xf3n"]}),(0,e.jsxs)("div",{className:j().infoGrid,children:[(0,e.jsxs)("div",{className:`${j().infoItem} ${j().fullWidth}`,children:[(0,e.jsx)("label",{className:j().label,children:"Origen:"}),(0,e.jsx)("span",{children:a.direccion_origen})]}),(0,e.jsxs)("div",{className:`${j().infoItem} ${j().fullWidth}`,children:[(0,e.jsx)("label",{className:j().label,children:"Destino:"}),(0,e.jsx)("span",{children:a.direccion_destino})]})]})]}),a.n_poliza&&(0,e.jsxs)(g.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},className:j().infoSection,children:[(0,e.jsxs)("h3",{children:[(0,e.jsx)("i",{className:"fas fa-file-alt"})," P\xf3liza"]}),(0,e.jsx)("div",{className:j().infoGrid,children:(0,e.jsxs)("div",{className:`${j().infoItem} ${j().fullWidth}`,children:[(0,e.jsx)("label",{className:j().label,children:"N\xfamero de P\xf3liza:"}),(0,e.jsx)("span",{className:j().polizaNumero,children:a.n_poliza})]})})]})]}),n=({costDetails:a,handleCostChange:b,isCostConfirmed:c,confirmCostDetails:d})=>(0,e.jsxs)(g.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:j().costDetails,children:[(0,e.jsxs)("h3",{children:[(0,e.jsx)("i",{className:"fas fa-dollar-sign"})," Editar Costos"]}),(0,e.jsxs)("div",{className:j().costosGrid,children:[(0,e.jsxs)("div",{className:j().costoItem,children:[(0,e.jsx)("label",{children:"Costo Adicional:"}),(0,e.jsx)("div",{className:j().inputWithIcon,children:(0,e.jsx)("input",{type:"text",name:"costoAdicional",value:0===a.costoAdicional?"":a.costoAdicional,onChange:b,disabled:c,pattern:"[0-9]*\\.?[0-9]*",placeholder:"0.00",className:j().input})})]}),(0,e.jsxs)("div",{className:j().costoItem,children:[(0,e.jsx)("label",{children:"Costo Asegurado:"}),(0,e.jsxs)("div",{className:j().inputWithIcon,children:[(0,e.jsx)("i",{className:"fas fa-dollar-sign"}),(0,e.jsx)("input",{type:"text",name:"costoAsegurado",value:0===a.costoAsegurado?"":a.costoAsegurado,onChange:b,disabled:c,pattern:"[0-9]*\\.?[0-9]*",placeholder:"0.00",className:j().input})]})]}),(0,e.jsxs)("div",{className:j().costoItem,children:[(0,e.jsx)("label",{children:"N\xfamero de Casetas:"}),(0,e.jsxs)("div",{className:j().inputWithIcon,children:[(0,e.jsx)("i",{className:"fas fa-road"}),(0,e.jsx)("input",{type:"number",name:"numeroCasetas",value:a.numeroCasetas,onChange:b,disabled:c,className:j().input})]})]}),(0,e.jsxs)("div",{className:j().costoItem,children:[(0,e.jsx)("label",{children:"Costo de Casetas:"}),(0,e.jsxs)("div",{className:j().inputWithIcon,children:[(0,e.jsx)("i",{className:"fas fa-dollar-sign"}),(0,e.jsx)("input",{type:"number",name:"costoCasetas",value:0===a.costoCasetas?"":a.costoCasetas,onChange:b,disabled:c,pattern:"[0-9]*\\.?[0-9]*",placeholder:"0.00",className:j().input})]})]})]}),!c&&(0,e.jsx)("div",{className:j().costActions,children:(0,e.jsxs)(g.motion.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:d,className:`${j().btnAction} ${j().btnConfirmarDetalles}`,children:[(0,e.jsx)("i",{className:"fas fa-check-circle"})," Confirmar Costos"]})}),c&&(0,e.jsxs)("div",{className:j().costConfirmed,children:[(0,e.jsx)("i",{className:"fas fa-check-circle"})," Costos confirmados"]})]}),o=({poliza:a,confirmPoliza:b,setPoliza:c,setConfirmPoliza:d,isPolizaConfirmed:f,handleConfirmPoliza:h})=>(0,e.jsxs)(g.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:j().confirmPoliza,children:[(0,e.jsxs)("h3",{children:[(0,e.jsx)("i",{className:"fas fa-file-alt"})," P\xf3liza"]}),(0,e.jsxs)("div",{className:j().polizaInputs,children:[(0,e.jsxs)("div",{className:j().inputGroup,children:[(0,e.jsx)("label",{children:"N\xfamero de P\xf3liza:"}),(0,e.jsxs)("div",{className:j().inputWithIcon,children:[(0,e.jsx)("i",{className:"fas fa-file-contract"}),(0,e.jsx)("input",{type:"text",placeholder:"Ingrese n\xfamero de p\xf3liza",value:a,onChange:a=>c(a.target.value),disabled:f,className:j().input})]})]}),(0,e.jsxs)("div",{className:j().inputGroup,children:[(0,e.jsx)("label",{children:"Confirmar P\xf3liza:"}),(0,e.jsxs)("div",{className:j().inputWithIcon,children:[(0,e.jsx)("i",{className:"fas fa-check-double"}),(0,e.jsx)("input",{type:"text",placeholder:"Confirme n\xfamero de p\xf3liza",value:b,onChange:a=>d(a.target.value),disabled:f,className:`${j().input} ${b&&a!==b?j().error:""}`})]})]})]}),!f&&(0,e.jsx)("div",{className:j().polizaActions,children:(0,e.jsxs)(g.motion.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:h,className:`${j().btnAction} ${j().btnConfirmarPoliza}`,disabled:!a||!b||a!==b,children:[(0,e.jsx)("i",{className:"fas fa-check-double"})," Confirmar P\xf3liza"]})}),f&&(0,e.jsxs)(g.motion.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:j().polizaConfirmada,children:[(0,e.jsx)("i",{className:"fas fa-check"})," P\xf3liza confirmada: ",a]}),b&&a!==b&&(0,e.jsxs)(g.motion.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:j().polizaError,children:[(0,e.jsx)("i",{className:"fas fa-exclamation-triangle"})," Las p\xf3lizas no coinciden"]})]}),p=({isOpen:a,onClose:b,cotizacion:c,operadores:d,onAsignar:i,onIniciar:l,onCancelar:p,onCompletar:q,onReasignarOperador:r,onRecordarOperador:s})=>{let[t,u]=(0,f.useState)(""),[v,w]=(0,f.useState)(!1),[x,y]=(0,f.useState)(""),[z,A]=(0,f.useState)(""),[B,C]=(0,f.useState)(!1),[D,E]=(0,f.useState)({costoAdicional:0,costoAsegurado:0,numeroCasetas:0,costoCasetas:0}),[F,G]=(0,f.useState)(!1),[H,I]=(0,f.useState)(!1),[J,K]=(0,f.useState)(!1),[L,M]=(0,f.useState)(null),[N,O]=(0,f.useState)("detalles"),[P,Q]=(0,f.useState)(!1),[R,S]=(0,f.useState)("asignar"),[T,U]=(0,f.useState)(!1),[V,W]=(0,f.useState)([]),[X,Y]=(0,f.useState)(0);(0,f.useEffect)(()=>{c&&(Y(parseFloat(c.total||"0")),E({costoAdicional:parseFloat(c.costo_adicional||"0"),costoAsegurado:parseFloat(c.costo_asegurado||"0"),numeroCasetas:parseInt(c.num_casetas||"0"),costoCasetas:parseFloat(c.costo_casetas||"0")}),c.n_poliza&&(y(c.n_poliza),A(c.n_poliza),C(!0)))},[c]),(0,f.useEffect)(()=>(W((()=>{let a=[];if(a.push({tipo:"creado",titulo:"Servicio Creado",fecha:new Date(c.fecha_creacion||Date.now()-864e5).toLocaleString(),descripcion:`Servicio #${c.n_folio} creado en el sistema.`}),c.operador_id){let b=d.find(a=>a.id_operador.toString()===c.operador_id?.toString());a.push({tipo:"asignado",titulo:"Operador Asignado",fecha:new Date(c.fecha_asignacion||Date.now()-432e5).toLocaleString(),descripcion:`Se asign\xf3 el servicio al operador ${b?.nombre||""} ${b?.ap_paterno||""}.`})}return["En Progreso","Iniciado","Completado"].includes(c.estado)&&a.push({tipo:"iniciado",titulo:"Servicio Iniciado",fecha:new Date(c.fecha_inicio||Date.now()-216e5).toLocaleString(),descripcion:"El operador ha iniciado el servicio."}),"Completado"===c.estado&&a.push({tipo:"completado",titulo:"Servicio Completado",fecha:new Date(c.fecha_completado||Date.now()-36e5).toLocaleString(),descripcion:`Servicio completado con \xe9xito. Total: ${parseFloat(c.total_con_iva||"0").toFixed(2)}`}),"Cancelado"===c.estado&&a.push({tipo:"cancelado",titulo:"Servicio Cancelado",fecha:new Date(c.fecha_cancelacion||Date.now()-72e5).toLocaleString(),descripcion:"El servicio ha sido cancelado."}),a})()),a&&(w(!0),document.body.style.overflow="hidden"),()=>{document.body.style.overflow="auto"}),[a,c,d]),(0,f.useEffect)(()=>{switch(c.operador_id&&(I(!0),u(c.operador_id.toString())),c.estado){case"Pendiente":default:S("asignar");break;case"Asignado":S("iniciar");break;case"En Progreso":case"Iniciado":S("editar");break;case"Completado":case"Cancelado":S("finalizado")}},[c]);let Z=a=>{u(a.target.value)},$=async()=>{try{let a=parseFloat(D.costoAdicional.toString())||0,b=parseFloat(D.costoAsegurado.toString())||0,d=parseInt(D.numeroCasetas.toString())||0,e=parseFloat(D.costoCasetas.toString())||0;console.log("Enviando datos de costos:",{costo_adicional:a,costo_asegurado:b,num_casetas:d,costo_casetas:e});let f=await h.default.put(`http://localhost:5000/api/cotizaciones/${c.id_cotizacion}/costos`,{costo_adicional:a,costo_asegurado:b,num_casetas:d,costo_casetas:e});console.log("Respuesta del servidor:",f.data),G(!0),ab("Detalles de costo actualizados y confirmados"),W(a=>[...a,{tipo:"costos",titulo:"Costos Actualizados",fecha:new Date().toLocaleString(),descripcion:`Se actualizaron los costos del servicio. Total: ${aa().total.toFixed(2)}`}])}catch(b){console.error("Error al actualizar costos:",b);let a=h.default.isAxiosError(b)?b.response?.data?.mensaje||b.message:"Error desconocido";ab(`Error al actualizar los costos: ${a}`,"error")}},_=async()=>{if(""!==x.trim()&&x===z)try{console.log("Enviando datos de p\xf3liza:",{n_poliza:x});let a=await h.default.put(`http://localhost:5000/api/cotizaciones/${c.id_cotizacion}/poliza`,{n_poliza:x});console.log("Respuesta del servidor:",a.data),C(!0),ab("P\xf3liza confirmada y guardada correctamente"),W(a=>[...a,{tipo:"poliza",titulo:"P\xf3liza Registrada",fecha:new Date().toLocaleString(),descripcion:`Se registr\xf3 la p\xf3liza n\xfamero: ${x}`}])}catch(b){console.error("Error al guardar p\xf3liza:",b);let a=h.default.isAxiosError(b)?b.response?.data?.mensaje||b.message:"Error desconocido";ab(`Error al guardar la p\xf3liza: ${a}`,"error")}else ab("Las p\xf3lizas no coinciden o est\xe1n vac\xedas","error")},aa=()=>{let a=parseFloat(c.total||"0"),b=parseFloat(D.costoAdicional.toString()||"0")+parseFloat(D.costoAsegurado.toString()||"0")+parseInt(D.numeroCasetas.toString()||"0")*parseFloat(D.costoCasetas.toString()||"0"),d=a+b,e=.16*d;return{subtotal:d,iva:e,total:d+e}},ab=(a,b="success")=>{let c=document.createElement("div");c.className=`${j().notification} ${j()[`notification${b.charAt(0).toUpperCase()+b.slice(1)}`]}`,c.innerHTML=`
      <div class="${j().notificationContent}">
        <i class="fas ${"success"===b?"fa-check-circle":"fa-exclamation-circle"}"></i>
        <p>${a}</p>
      </div>
    `,document.body.appendChild(c),setTimeout(()=>{c.classList.add(j().notificationShow)},10),setTimeout(()=>{c.classList.remove(j().notificationShow),setTimeout(()=>{document.body.removeChild(c)},300)},3e3)},ac=async()=>{if(!c.operador_id)return void ab("No hay operador asignado","error");Q(!0);try{let a=d.find(a=>a.id_operador.toString()===c.operador_id?.toString());if(!a)throw Error("No se encontr\xf3 informaci\xf3n del operador");if(!a.telefono)throw Error("El operador no tiene un n\xfamero de tel\xe9fono registrado");if(!a.apikey_telefono)throw Error("El operador no tiene una API key configurada");let b=(0,k.Ik)(c,a),e=await (0,k.H0)(a.telefono,b,a.apikey_telefono);if(!e.success)throw Error(e.message);ab("Mensaje enviado al operador correctamente"),W(b=>[...b,{tipo:"mensaje",titulo:"Mensaje Enviado",fecha:new Date().toLocaleString(),descripcion:`Se ha enviado un mensaje al operador ${a.nombre} ${a.ap_paterno}.`}]),S("editar")}catch(a){a instanceof Error&&a.message}finally{Q(!1)}},ad=async()=>{if(!c.operador_id)return void ab("No hay operador asignado","error");Q(!0);try{let a=d.find(a=>a.id_operador.toString()===c.operador_id?.toString());if(!a)throw Error("No se encontr\xf3 informaci\xf3n del operador");if(!a.telefono)throw Error("El operador no tiene un n\xfamero de tel\xe9fono registrado");if(!a.apikey_telefono)throw Error("El operador no tiene una API key configurada");let b=(0,k.gV)(c,a),e=await (0,k.H0)(a.telefono,b,a.apikey_telefono);if(!e.success)throw Error(e.message);ab("Mensaje reenviado al operador correctamente"),s&&s(),W(b=>[...b,{tipo:"mensaje",titulo:"Mensaje Reenviado",fecha:new Date().toLocaleString(),descripcion:`Se ha reenviado un mensaje al operador ${a.nombre} ${a.ap_paterno}.`}])}catch(a){}finally{Q(!1)}},ae=async a=>{if(!a)return void ab("Seleccione un operador primero","error");Q(!0);try{let b=d.find(b=>b.id_operador.toString()===a);if(!b)throw Error("No se encontr\xf3 informaci\xf3n del nuevo operador");if(!b.telefono)throw Error("El nuevo operador no tiene un n\xfamero de tel\xe9fono registrado");if(!b.apikey_telefono)throw Error("El nuevo operador no tiene una API key configurada");await r(a);let e=(0,k.M3)(c,b),f=await (0,k.H0)(b.telefono,e,b.apikey_telefono);if(!f.success)throw Error(f.message);I(!0),U(!1),ab("Operador reasignado y notificado correctamente"),W(a=>[...a,{tipo:"reasignado",titulo:"Operador Reasignado",fecha:new Date().toLocaleString(),descripcion:`El servicio ha sido reasignado al operador ${b.nombre} ${b.ap_paterno}.`}]),S("iniciar")}catch(a){}finally{Q(!1)}},af=async()=>{if(c.operador_id)try{let a=d.find(a=>a.id_operador.toString()===c.operador_id?.toString());if(!a||!a.telefono||!a.apikey_telefono)return;let{total:b}=aa(),e=(0,k.Rp)(c,a,b);await (0,k.H0)(a.telefono,e,a.apikey_telefono)}catch(a){console.error("Error al enviar mensaje de servicio completado:",a)}},ag=async()=>{if(c.operador_id)try{let a=d.find(a=>a.id_operador.toString()===c.operador_id?.toString());if(!a||!a.telefono||!a.apikey_telefono)return;let b=(0,k.td)(c,a);await (0,k.H0)(a.telefono,b,a.apikey_telefono)}catch(a){console.error("Error al enviar mensaje de cancelaci\xf3n:",a)}},ah=async()=>{if(!t)return void ab("Seleccione un operador primero","error");try{await i(t);let a=d.find(a=>a.id_operador.toString()===t);if(I(!0),a&&a.telefono&&a.apikey_telefono){Q(!0);try{let b=(0,k.Re)(c,a);await (0,k.H0)(a.telefono,b,a.apikey_telefono),ab("Operador asignado y notificado correctamente")}catch(a){console.error("Error al enviar notificaci\xf3n:",a),ab("Operador asignado, pero hubo un error al enviar la notificaci\xf3n","warning")}finally{Q(!1)}}else ab("Operador asignado correctamente");W(b=>[...b,{tipo:"asignado",titulo:"Operador Asignado",fecha:new Date().toLocaleString(),descripcion:`Se asign\xf3 el servicio al operador ${a?.nombre||""} ${a?.ap_paterno||""}.`}]),S("iniciar")}catch(b){console.error("Error al asignar operador:",b);let a=b instanceof Error?b.message:"Error desconocido";ab(`Error al asignar operador: ${a}`,"error")}},ai=async()=>{try{await l(),await ac(),ab("El servicio ha iniciado"),W(a=>[...a,{tipo:"iniciado",titulo:"Servicio Iniciado",fecha:new Date().toLocaleString(),descripcion:"El operador ha iniciado el servicio."}]),S("editar")}catch(b){console.error("Error al iniciar servicio:",b);let a=b instanceof Error?b.message:"Error desconocido";ab(`Error al iniciar servicio: ${a}`,"error")}},aj=async()=>{try{await ag(),await p(),ab("Servicio cancelado"),W(a=>[...a,{tipo:"cancelado",titulo:"Servicio Cancelado",fecha:new Date().toLocaleString(),descripcion:"El servicio ha sido cancelado."}]),S("finalizado")}catch(b){console.error("Error al cancelar servicio:",b);let a=b instanceof Error?b.message:"Error desconocido";ab(`Error al cancelar servicio: ${a}`,"error")}},ak=async()=>{try{let{total:a}=aa();await af(),await q(D,a),ab("Servicio completado exitosamente"),W(b=>[...b,{tipo:"completado",titulo:"Servicio Completado",fecha:new Date().toLocaleString(),descripcion:`Servicio completado con \xe9xito. Total: ${a.toFixed(2)}`}]),S("finalizado")}catch(b){console.error("Error al completar servicio:",b);let a=b instanceof Error?b.message:"Error desconocido";ab(`Error al completar servicio: ${a}`,"error")}},al=(a,b)=>{let c;switch(b){case"iniciar":c=ai;break;case"cancelar":c=aj;break;case"completar":c=ak;break;default:c=a||(()=>{})}M(()=>c),K(!0)},{subtotal:am,iva:an,total:ao}=aa();return(0,e.jsx)(g.AnimatePresence,{children:a&&(0,e.jsxs)(g.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},className:`${j().modalOverlay} ${v?"fade-in":"fade-out"}`,children:[(0,e.jsxs)(g.motion.div,{initial:{y:-50,opacity:0},animate:{y:0,opacity:1},exit:{y:50,opacity:0},transition:{type:"spring",stiffness:300,damping:30},className:`${j().modalContent} ${v?"slide-in":"slide-out"}`,children:[(0,e.jsx)("button",{onClick:()=>{w(!1),setTimeout(()=>b(),300)},className:j().closeBtn,children:(0,e.jsx)("i",{className:"fas fa-times"})}),(0,e.jsxs)("div",{className:j().modalHeader,children:[(0,e.jsxs)("h2",{children:[(0,e.jsx)("i",{className:"fas fa-clipboard-list"}),"Servicio #",c.n_folio]}),(0,e.jsx)("div",{className:j().estadoBadge,children:(0,e.jsx)("span",{className:j()[`estado${c.estado?.charAt(0).toUpperCase()+c.estado?.slice(1).toLowerCase()}`],children:c.estado})})]}),(0,e.jsxs)("div",{className:j().tabsContainer,children:[(0,e.jsxs)("div",{className:`${j().tab} ${"detalles"===N?j().tabActive:""}`,onClick:()=>O("detalles"),children:[(0,e.jsx)("i",{className:"fas fa-info-circle"})," Detalles"]}),(0,e.jsxs)("div",{className:`${j().tab} ${"acciones"===N?j().tabActive:""}`,onClick:()=>O("acciones"),children:[(0,e.jsx)("i",{className:"fas fa-cogs"})," Acciones"]}),(0,e.jsxs)("div",{className:`${j().tab} ${"historial"===N?j().tabActive:""}`,onClick:()=>O("historial"),children:[(0,e.jsx)("i",{className:"fas fa-history"})," Historial"]})]}),(0,e.jsx)("div",{className:j().modalBody,children:(0,e.jsxs)(g.AnimatePresence,{mode:"wait",children:["detalles"===N&&(0,e.jsx)(g.motion.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},transition:{duration:.3},children:(0,e.jsx)(m,{cotizacion:c})},"detalles"),"acciones"===N&&(0,e.jsxs)(g.motion.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},transition:{duration:.3},children:["asignar"===R&&(0,e.jsxs)(g.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:`${j().operatorSection} ${j().infoSection}`,children:[(0,e.jsxs)("h3",{children:[(0,e.jsx)("i",{className:"fas fa-user"})," ",c.operador_id?"Reasignar Operador":"Seleccionar Operador"]}),(0,e.jsxs)("div",{className:j().selectContainer,children:[(0,e.jsxs)("select",{value:t,onChange:Z,className:j().selectOperador,disabled:P,children:[(0,e.jsx)("option",{value:"",children:"Seleccionar operador"}),d.map(a=>(0,e.jsxs)("option",{value:a.id_operador,children:[a.nombre," ",a.ap_paterno," - ",a.telefono||"Sin Tlf"]},a.id_operador))]}),(0,e.jsx)("i",{className:`fas fa-chevron-down ${j().selectArrow}`})]}),t&&(0,e.jsxs)(g.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:j().operatorPreview,children:[(0,e.jsx)("h4",{children:"Operador Seleccionado:"}),(0,e.jsxs)("p",{children:[d.find(a=>a.id_operador.toString()===t)?.nombre," ",d.find(a=>a.id_operador.toString()===t)?.ap_paterno]}),(0,e.jsxs)("p",{children:[(0,e.jsx)("i",{className:"fas fa-phone"})," ",d.find(a=>a.id_operador.toString()===t)?.telefono||"Sin tel\xe9fono"]})]})]}),"editar"===R&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(n,{costDetails:D,handleCostChange:a=>{let{name:b,value:c}=a.target,d=c.replace(/^0+(?=\d)/,"").replace(/[^\d.]/g,""),e=d.split("."),f=e.length>2?`${e[0]}.${e.slice(1).join("")}`:d,g=""===f?0:parseFloat(f)||0;E(a=>({...a,[b]:g}))},isCostConfirmed:F,confirmCostDetails:$}),(0,e.jsx)(o,{poliza:x,confirmPoliza:z,setPoliza:y,setConfirmPoliza:A,isPolizaConfirmed:B,handleConfirmPoliza:_}),(0,e.jsxs)(g.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:j().totales,children:[(0,e.jsx)("h3",{children:"Resumen de Costos"}),(0,e.jsxs)("div",{className:j().totalesGrid,children:[(0,e.jsxs)("div",{className:j().totalItem,children:[(0,e.jsx)("span",{children:"Costo Original:"}),(0,e.jsxs)("span",{children:["$",parseFloat(c.total||"0").toFixed(2)]})]}),(0,e.jsxs)("div",{className:j().totalItem,children:[(0,e.jsx)("span",{children:"Costos Adicionales:"}),(0,e.jsxs)("span",{children:["$",(parseFloat(D.costoAdicional.toString()||"0")+parseFloat(D.costoAsegurado.toString()||"0")+parseInt(D.numeroCasetas.toString()||"0")*parseFloat(D.costoCasetas.toString()||"0")).toFixed(2)]})]}),(0,e.jsxs)("div",{className:j().totalItem,children:[(0,e.jsx)("span",{children:"Subtotal:"}),(0,e.jsxs)("span",{children:["$",am.toFixed(2)]})]}),(0,e.jsxs)("div",{className:j().totalItem,children:[(0,e.jsx)("span",{children:"IVA (16%):"}),(0,e.jsxs)("span",{children:["$",an.toFixed(2)]})]}),(0,e.jsxs)("div",{className:`${j().totalItem} ${j().totalFinal}`,children:[(0,e.jsx)("span",{children:"Total:"}),(0,e.jsxs)("span",{children:["$",ao.toFixed(2)]})]})]})]})]}),(0,e.jsxs)("div",{className:j().actionContainer,children:[(0,e.jsx)("h3",{children:"Acciones Disponibles"}),(()=>{switch(R){case"asignar":return(0,e.jsx)("div",{className:j().actionButtons,children:(0,e.jsxs)(g.motion.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:ah,className:`${j().btnAction} ${j().btnAsignar}`,disabled:!t||P,children:[(0,e.jsx)("i",{className:"fas fa-check"}),P?"Asignando...":"Asignar Operador"]})});case"iniciar":return(0,e.jsxs)("div",{className:j().actionButtons,children:[(0,e.jsxs)(g.motion.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>al(null,"iniciar"),className:`${j().btnAction} ${j().btnIniciar}`,disabled:P,children:[(0,e.jsx)("i",{className:"fas fa-play"}),P?"Iniciando...":"Iniciar Viaje"]}),(0,e.jsxs)(g.motion.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>al(null,"cancelar"),className:`${j().btnAction} ${j().btnCancelar}`,disabled:P,children:[(0,e.jsx)("i",{className:"fas fa-times"})," Cancelar Viaje"]})]});case"editar":return(0,e.jsxs)("div",{className:j().actionButtons,children:[(0,e.jsxs)(g.motion.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:ad,className:`${j().btnAction} ${j().btnRecordar}`,disabled:P,children:[(0,e.jsx)("i",{className:"fas fa-envelope"}),P?"Enviando...":"Enviar mensaje a operador"]}),(0,e.jsxs)(g.motion.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>U(!0),className:`${j().btnAction} ${j().btnReasignar}`,children:[(0,e.jsx)("i",{className:"fas fa-exchange-alt"})," Reasignar Operador"]}),(0,e.jsxs)(g.motion.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>al(null,"cancelar"),className:`${j().btnAction} ${j().btnCancelar}`,children:[(0,e.jsx)("i",{className:"fas fa-times"})," Cancelar Servicio"]}),B&&F&&(0,e.jsxs)(g.motion.button,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>al(null,"completar"),className:`${j().btnAction} ${j().btnCompletar}`,children:[(0,e.jsx)("i",{className:"fas fa-check"})," Marcar como Completado"]})]});case"finalizado":return(0,e.jsx)("div",{className:j().actionButtons,children:"Completado"===c.estado?(0,e.jsxs)(g.motion.div,{initial:{opacity:0},animate:{opacity:1},className:j().estadoCompletado,children:[(0,e.jsx)("i",{className:"fas fa-check-circle"})," Este servicio ha sido completado"]}):"Cancelado"===c.estado?(0,e.jsxs)(g.motion.div,{initial:{opacity:0},animate:{opacity:1},className:j().estadoCancelado,children:[(0,e.jsx)("i",{className:"fas fa-ban"})," Este servicio ha sido cancelado"]}):null});default:return null}})()]})]},"acciones"),"historial"===N&&(0,e.jsx)(g.motion.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},transition:{duration:.3},className:j().historyContainer,children:V.map((a,b)=>(0,e.jsxs)(g.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*b},className:`${j().historyItem} ${j()[`historyItem${a.tipo.charAt(0).toUpperCase()+a.tipo.slice(1)}`]}`,children:[(0,e.jsx)("div",{className:j().historyIcon,children:(0,e.jsx)("i",{className:`fas ${"creado"===a.tipo?"fa-plus":"asignado"===a.tipo?"fa-user":"iniciado"===a.tipo?"fa-play":"completado"===a.tipo?"fa-check":"cancelado"===a.tipo?"fa-ban":"mensaje"===a.tipo?"fa-envelope":"reasignado"===a.tipo?"fa-exchange-alt":"costos"===a.tipo?"fa-dollar-sign":"poliza"===a.tipo?"fa-file-alt":"fa-info-circle"}`})}),(0,e.jsxs)("div",{className:j().historyContent,children:[(0,e.jsx)("div",{className:j().historyTitle,children:a.titulo}),(0,e.jsx)("div",{className:j().historyDate,children:a.fecha}),(0,e.jsx)("div",{className:j().historyDescription,children:a.descripcion})]})]},b))},"historial")]})})]}),(0,e.jsx)(g.AnimatePresence,{children:J&&(0,e.jsx)(g.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:j().confirmationOverlay,children:(0,e.jsxs)(g.motion.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.8,opacity:0},className:j().confirmationDialog,children:[(0,e.jsx)("h3",{children:"\xbfEst\xe1 seguro?"}),(0,e.jsx)("p",{children:"Esta acci\xf3n no se puede deshacer."}),(0,e.jsxs)("div",{className:j().confirmationButtons,children:[(0,e.jsxs)("button",{onClick:()=>K(!1),className:j().btnCancel,children:[(0,e.jsx)("i",{className:"fas fa-times"})," Cancelar"]}),(0,e.jsxs)("button",{onClick:()=>{L&&L(),K(!1)},className:j().btnConfirm,children:[(0,e.jsx)("i",{className:"fas fa-check"})," Confirmar"]})]})]})})}),(0,e.jsx)(g.AnimatePresence,{children:T&&(0,e.jsx)(g.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:j().reasignarOverlay,children:(0,e.jsxs)(g.motion.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.8,opacity:0},className:j().reasignarDialog,children:[(0,e.jsx)("h3",{children:"Reasignar Operador"}),(0,e.jsx)("p",{children:"Seleccione un nuevo operador para este servicio:"}),(0,e.jsxs)("div",{className:j().selectContainer,children:[(0,e.jsxs)("select",{value:t,onChange:Z,className:j().selectOperador,children:[(0,e.jsx)("option",{value:"",children:"Seleccionar operador"}),d.map(a=>(0,e.jsxs)("option",{value:a.id_operador,children:[a.nombre," ",a.ap_paterno," - ",a.telefono||"Sin Tlf"]},a.id_operador))]}),(0,e.jsx)("i",{className:`fas fa-chevron-down ${j().selectArrow}`})]}),t&&(0,e.jsxs)(g.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:j().operatorPreview,children:[(0,e.jsx)("h4",{children:"Nuevo Operador:"}),(0,e.jsxs)("p",{children:[d.find(a=>a.id_operador.toString()===t)?.nombre," ",d.find(a=>a.id_operador.toString()===t)?.ap_paterno]}),(0,e.jsxs)("p",{children:[(0,e.jsx)("i",{className:"fas fa-phone"})," ",d.find(a=>a.id_operador.toString()===t)?.telefono||"Sin tel\xe9fono"]})]}),(0,e.jsxs)("div",{className:j().reasignarButtons,children:[(0,e.jsxs)("button",{onClick:()=>U(!1),className:j().btnCancel,children:[(0,e.jsx)("i",{className:"fas fa-times"})," Cancelar"]}),(0,e.jsxs)("button",{onClick:()=>{t&&t!==c.operador_id?.toString()?ae(t):ab("Seleccione un operador diferente","error")},className:j().btnConfirm,disabled:!t||t===c.operador_id?.toString()||P,children:[(0,e.jsx)("i",{className:"fas fa-check"}),P?"Reasignando...":"Confirmar Reasignaci\xf3n"]})]})]})})})]})})};d()}catch(a){d(a)}})}};