(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[383],{2815:e=>{e.exports={navbar:"cotizaciones_navbar__O4OFF",slideInLeft:"cotizaciones_slideInLeft__saDbQ",scrolled:"cotizaciones_scrolled__n8wBz",navbarBrand:"cotizaciones_navbarBrand__jWHYe",navLinks:"cotizaciones_navLinks__OJhAf",scrolledNavLink:"cotizaciones_scrolledNavLink__yTNjC",menuToggle:"cotizaciones_menuToggle__ozpIW",bar:"cotizaciones_bar__toY0u",scrolledBar:"cotizaciones_scrolledBar__9nWuL",activeBar1:"cotizaciones_activeBar1__FLtjF",activeBar2:"cotizaciones_activeBar2__wUrKf",activeBar3:"cotizaciones_activeBar3__9JWSY",pageHeader:"cotizaciones_pageHeader__Nv9ww",filter:"cotizaciones_filter__rJ3zl",headerContent:"cotizaciones_headerContent__CYlCZ",presentationTitle:"cotizaciones_presentationTitle__96PLZ",presentationSubtitle:"cotizaciones_presentationSubtitle__96mkw",contentWrapper:"cotizaciones_contentWrapper__q1g_D",tableContainer:"cotizaciones_tableContainer__1R7fI",fadeIn:"cotizaciones_fadeIn__t9rCF",table:"cotizaciones_table__Jof4F",th:"cotizaciones_th__kZg4P",td:"cotizaciones_td__q9EOq",tr:"cotizaciones_tr__sVzi9",statusPendiente:"cotizaciones_statusPendiente__lQqyD",pulse:"cotizaciones_pulse__W7_Ov",statusAsignado:"cotizaciones_statusAsignado__ApRoW",statusEnprogreso:"cotizaciones_statusEnprogreso__qIuLg",statusCompletado:"cotizaciones_statusCompletado__BFgLd",statusCancelado:"cotizaciones_statusCancelado__B9Ktq",btnAcciones:"cotizaciones_btnAcciones__BrCpR",loading:"cotizaciones_loading__dC792",noData:"cotizaciones_noData__4xfWC",shimmer:"cotizaciones_shimmer__wuRgf",rotate:"cotizaciones_rotate__Nr5dw",footer:"cotizaciones_footer__IUvp9",footerContent:"cotizaciones_footerContent__Ij5FA",userInfo:"cotizaciones_userInfo__uB_ld",userEmail:"cotizaciones_userEmail__eZRmN",footerNav:"cotizaciones_footerNav__AeZMP",footerLink:"cotizaciones_footerLink__3sCjG",searchFiltersContainer:"cotizaciones_searchFiltersContainer__7C24h",slideIn:"cotizaciones_slideIn__XlkfA",searchBox:"cotizaciones_searchBox__jICKr",searchInput:"cotizaciones_searchInput__6_6w6",searchBoxBefore:"cotizaciones_searchBoxBefore__IOQ1v",searchBtn:"cotizaciones_searchBtn__gA1fu",filterButtons:"cotizaciones_filterButtons__kxV9t",filterBtn:"cotizaciones_filterBtn__qBMRx",filterBtnActive:"cotizaciones_filterBtnActive__qJ13_",advancedFiltersToggle:"cotizaciones_advancedFiltersToggle__0oA20",toggleBtn:"cotizaciones_toggleBtn__z18YD",toggleBtnIcon:"cotizaciones_toggleBtnIcon__kglVE",toggleBtnActive:"cotizaciones_toggleBtnActive__OXmMk",advancedFilters:"cotizaciones_advancedFilters__JNoJo",filterRow:"cotizaciones_filterRow__DDx27",filterField:"cotizaciones_filterField__v_qxU",filterLabel:"cotizaciones_filterLabel__mEnnm",filterInput:"cotizaciones_filterInput__OE6wq",filterSelect:"cotizaciones_filterSelect__Y05Zx",filterActions:"cotizaciones_filterActions__m9WH_",applyFiltersBtn:"cotizaciones_applyFiltersBtn__6EcFh",clearFiltersBtn:"cotizaciones_clearFiltersBtn__X3H_W",highlight:"cotizaciones_highlight__Sns5x",resultsCount:"cotizaciones_resultsCount__11Yrh",resultsCountIcon:"cotizaciones_resultsCountIcon__rXZB9",pagination:"cotizaciones_pagination__gWkmx",paginationBtn:"cotizaciones_paginationBtn__QOmWY",active:"cotizaciones_active__ut3CH",disabled:"cotizaciones_disabled__0hKh4",paginationBtnActive:"cotizaciones_paginationBtnActive__H_9Y_",paginationBtnDisabled:"cotizaciones_paginationBtnDisabled__6PaYb",paginationInfo:"cotizaciones_paginationInfo__FUfKm",customAlert:"cotizaciones_customAlert__7QbKx",slideInRight:"cotizaciones_slideInRight__ZwiU9",customAlertShow:"cotizaciones_customAlertShow__wOwYn",customAlertSuccess:"cotizaciones_customAlertSuccess__wBlFn",customAlertError:"cotizaciones_customAlertError__HuGvQ",customAlertWarning:"cotizaciones_customAlertWarning__J5mZt",customAlertInfo:"cotizaciones_customAlertInfo__7XgKJ",alertIcon:"cotizaciones_alertIcon__6Pcy5",alertContent:"cotizaciones_alertContent__UEMFc",alertTitle:"cotizaciones_alertTitle__DGi6i",alertMessage:"cotizaciones_alertMessage__dqmUC",alertClose:"cotizaciones_alertClose__lDF6s",alertProgress:"cotizaciones_alertProgress__QpBGu",sectionDivider:"cotizaciones_sectionDivider__N_k5S",menuToggleSpan:"cotizaciones_menuToggleSpan__jXAzK",navLinksActive:"cotizaciones_navLinksActive__OrqqG",menuToggleActive:"cotizaciones_menuToggleActive__R_BoI",shrink:"cotizaciones_shrink__lkkdz"}},7073:(e,a,i)=>{"use strict";i.r(a),i.d(a,{default:()=>u});var t=i(7876),o=i(4232),s=i(6816),c=i(7328),n=i.n(c),r=i(3039),l=i(5003),d=i(8230),_=i.n(d),h=i(4672),m=i(2815),p=i.n(m);(0,s.xI)(l.A);let u=()=>{let{user:e}=(0,r.A)(),[a,i]=(0,o.useState)([]),[s,c]=(0,o.useState)([]),[l,d]=(0,o.useState)([]),[m,u]=(0,o.useState)(!0),[f,v]=(0,o.useState)(null),[g,x]=(0,o.useState)(!1),[j,N]=(0,o.useState)(!1),[z,C]=(0,o.useState)(null),[b,w]=(0,o.useState)(""),[B,A]=(0,o.useState)("todos"),[E,L]=(0,o.useState)(!1),[S,k]=(0,o.useState)({id_servicio:"",cliente:"",tipo_convenio:"",tipo_servicio:"",estado:"",operador:"",fecha_desde:"",fecha_hasta:""}),[I,y]=(0,o.useState)(1),[F,T]=(0,o.useState)(50),[D,P]=(0,o.useState)(1),[O,M]=(0,o.useState)({visible:!1,tipo:"",titulo:"",mensaje:"",duracion:5e3}),R=(0,o.useRef)(null),q=async()=>{try{v(null),u(!0);let e=await fetch("http://localhost:5000/api/cotizaciones");if(!e.ok){let a=await e.json();throw Error(a.mensaje||"Error en el servidor")}let a=(await e.json()).sort((e,a)=>new Date(a.fecha_modificacion||a.fecha_cotizacion)-new Date(e.fecha_modificacion||e.fecha_cotizacion));i(a),c(a),J(a.length)}catch(e){console.error("Error detallado:",e),v(e.message),H("error","Error",e.message)}finally{u(!1)}},W=async()=>{try{let e=await fetch("http://localhost:5000/api/catalogos/operadores");if(!e.ok)throw Error("Error al cargar operadores");let a=await e.json();d(a.map(e=>{var a;return{...e,telefono:null==(a=e.telefono)?void 0:a.trim()}}))}catch(e){console.error("Error al cargar operadores:",e),v("Error al cargar operadores"),H("error","Error","No se pudieron cargar los operadores")}};(0,o.useEffect)(()=>{q(),W();let e=setInterval(()=>{q()},9e4),a=()=>{let e=document.querySelector(".".concat(p().navbar));e&&(window.scrollY>50?e.classList.add(p().scrolled):e.classList.remove(p().scrolled))};return window.addEventListener("scroll",a),()=>{clearInterval(e),window.removeEventListener("scroll",a),R.current&&clearTimeout(R.current)}},[]);let J=e=>{P(Math.ceil(e/F)),I>Math.ceil(e/F)&&y(1)};(0,o.useEffect)(()=>{J(s.length)},[s,F]);let Y=e=>{if(A(e),"todos"===e)return void c(a);c(a.filter(a=>{var i;return(null==(i=a.estado)?void 0:i.toLowerCase())===e.toLowerCase()})),y(1)},H=function(e,a,i){let t=arguments.length>3&&void 0!==arguments[3]?arguments[3]:5e3;R.current&&clearTimeout(R.current),M({visible:!0,tipo:e,titulo:a,mensaje:i,duracion:t}),R.current=setTimeout(()=>{M(e=>({...e,visible:!1}))},t)},U=async e=>{if(!e||!z)return void H("warning","Advertencia","Por favor seleccione un operador");try{let a=await fetch("http://localhost:5000/api/cotizaciones/".concat(z.id_cotizacion),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({estado:"Asignado",id_operador:e})});if(!a.ok)throw Error("Error en la respuesta del servidor");let i=await a.json();if(i.success)H("success","\xc9xito","Operador asignado correctamente"),await q(),x(!1);else throw Error(i.message||"Error al asignar operador")}catch(e){console.error("Error:",e),H("error","Error","Error al asignar operador: "+e.message)}},Z=async e=>{if(z)try{let a=await fetch("http://localhost:5000/api/cotizaciones/".concat(z.id_cotizacion),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({estado:e,id_operador:z.id_operador})}),i=await a.json();if(i.success)await q(),C(a=>({...a,estado:e})),H("success","Estado actualizado","Estado cambiado a: ".concat(e));else throw Error(i.message||"Error al cambiar el estado")}catch(e){console.error("Error:",e),H("error","Error","Error al cambiar el estado: ".concat(e.message))}},K=async e=>{if(!z)return void H("warning","Advertencia","No hay cotizaci\xf3n seleccionada");try{await Z("En Progreso");let a={idServicio:z.id_servicio,nombre:z.cliente_nombre||"Cliente",origen:z.direccion_origen||"Origen no especificado",destino:z.direccion_destino||"Destino no especificado",tipo_servicio:z.tipo_servicio,detalle_servicio:z.detalle_servicio};if(e)try{let i=await fetch("http://localhost:5000/api/enviar-notificacion",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({telefono:e,datos:a})}),t=await i.json();if(t.success)H("success","Servicio iniciado","Servicio iniciado y notificaci\xf3n enviada correctamente");else throw Error(t.message)}catch(e){}await q()}catch(e){console.error("Error completo:",e),H("error","Error","Error: ".concat(e.message))}},X=async()=>{try{await Z("Completado"),H("success","Servicio completado","Servicio marcado como completado exitosamente"),x(!1)}catch(e){console.error("Error al completar el servicio:",e),H("error","Error","Error al completar el servicio")}},Q=s.slice((I-1)*F,I*F),G=e=>{y(e),window.scrollTo({top:0,behavior:"smooth"})};return(0,t.jsxs)("div",{children:[(0,t.jsxs)(n(),{children:[(0,t.jsx)("title",{children:"Cotizaciones - AMA Cuernavaca"}),(0,t.jsx)("link",{rel:"icon",href:"/img/ico2.ico",type:"image/x-icon"}),(0,t.jsx)("link",{href:"https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600&display=swap",rel:"stylesheet"}),(0,t.jsx)("link",{rel:"stylesheet",href:"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"})]}),O.visible&&(0,t.jsxs)("div",{className:"".concat(p().customAlert," ").concat(p()["customAlert".concat(O.tipo.charAt(0).toUpperCase()+O.tipo.slice(1))]," ").concat(p().customAlertShow),children:[(0,t.jsxs)("div",{className:p().alertIcon,children:["success"===O.tipo&&(0,t.jsx)("i",{className:"fas fa-check-circle"}),"error"===O.tipo&&(0,t.jsx)("i",{className:"fas fa-exclamation-circle"}),"warning"===O.tipo&&(0,t.jsx)("i",{className:"fas fa-exclamation-triangle"}),"info"===O.tipo&&(0,t.jsx)("i",{className:"fas fa-info-circle"})]}),(0,t.jsxs)("div",{className:p().alertContent,children:[(0,t.jsx)("h4",{className:p().alertTitle,children:O.titulo}),(0,t.jsx)("p",{className:p().alertMessage,children:O.mensaje})]}),(0,t.jsx)("button",{className:p().alertClose,onClick:()=>{R.current&&clearTimeout(R.current),M(e=>({...e,visible:!1}))},children:(0,t.jsx)("i",{className:"fas fa-times"})}),(0,t.jsx)("div",{className:p().alertProgress,style:{animation:"shrink ".concat(O.duracion/1e3,"s linear forwards")}})]}),(0,t.jsxs)("nav",{className:p().navbar,children:[(0,t.jsx)("a",{className:p().navbarBrand,href:"#",children:(0,t.jsx)("img",{src:"/img/logo.png",alt:"Logo AMA",className:p().modalLogo})}),(0,t.jsxs)("div",{className:"".concat(p().menuToggle," ").concat(j?p().menuToggleActive:""),onClick:()=>N(!j),children:[(0,t.jsx)("span",{className:p().menuToggleSpan}),(0,t.jsx)("span",{className:p().menuToggleSpan}),(0,t.jsx)("span",{className:p().menuToggleSpan})]}),(0,t.jsx)("ul",{className:"".concat(p().navLinks," ").concat(j?p().navLinksActive:""),children:(0,t.jsx)(_(),{href:"/servicios/",children:"Servicios"})})]}),(0,t.jsxs)("div",{className:p().pageHeader,children:[(0,t.jsx)("div",{className:p().backgroundImage}),(0,t.jsx)("div",{className:p().filter}),(0,t.jsx)("div",{className:p().headerContent,children:(0,t.jsx)("h1",{className:"".concat(p().presentationTitle," ").concat(p().animatedTitle),children:"Cotizaciones"})})]}),(0,t.jsxs)("div",{className:p().contentWrapper,children:[(0,t.jsxs)("div",{className:p().searchFiltersContainer,children:[(0,t.jsxs)("div",{className:p().searchBox,children:[(0,t.jsx)("input",{type:"text",placeholder:"Buscar en todas las cotizaciones...",value:b,onChange:e=>{let i=e.target.value.toLowerCase();if(w(i),!i.trim())return void c(a);c(a.filter(e=>{var a,t,o,s,c,n,r;return(null==(a=e.id_servicio)?void 0:a.toString().includes(i))||(null==(t=e.nombre_cliente)?void 0:t.toLowerCase().includes(i))||(null==(o=e.tipo_convenio)?void 0:o.toLowerCase().includes(i))||(null==(s=e.tipo_servicio)?void 0:s.toLowerCase().includes(i))||(null==(c=e.detalle_servicio)?void 0:c.toLowerCase().includes(i))||(null==(n=e.estado)?void 0:n.toLowerCase().includes(i))||(null==(r=e.nombre_operador)?void 0:r.toLowerCase().includes(i))})),y(1)},className:p().searchInput}),(0,t.jsx)("div",{className:p().searchBoxBefore}),(0,t.jsx)("button",{className:p().searchBtn,children:(0,t.jsx)("i",{className:"fas fa-search"})})]}),(0,t.jsxs)("div",{className:p().filterButtons,children:[(0,t.jsx)("button",{className:"".concat(p().filterBtn," ").concat("todos"===B?p().filterBtnActive:""),onClick:()=>Y("todos"),children:"Todos"}),(0,t.jsx)("button",{className:"".concat(p().filterBtn," ").concat("pendiente"===B?p().filterBtnActive:""),onClick:()=>Y("pendiente"),children:"Pendientes"}),(0,t.jsx)("button",{className:"".concat(p().filterBtn," ").concat("asignado"===B?p().filterBtnActive:""),onClick:()=>Y("asignado"),children:"Asignados"}),(0,t.jsx)("button",{className:"".concat(p().filterBtn," ").concat("en progreso"===B?p().filterBtnActive:""),onClick:()=>Y("en progreso"),children:"En Progreso"}),(0,t.jsx)("button",{className:"".concat(p().filterBtn," ").concat("completado"===B?p().filterBtnActive:""),onClick:()=>Y("completado"),children:"Completados"}),(0,t.jsx)("button",{className:"".concat(p().filterBtn," ").concat("cancelado"===B?p().filterBtnActive:""),onClick:()=>Y("cancelado"),children:"Cancelados"})]}),(0,t.jsx)("div",{className:p().advancedFiltersToggle,children:(0,t.jsxs)("button",{className:"".concat(p().toggleBtn," ").concat(E?p().toggleBtnActive:""),onClick:()=>L(!E),children:[E?"Ocultar filtros avanzados":"Mostrar filtros avanzados",(0,t.jsx)("i",{className:"fas fa-chevron-".concat(E?"up":"down"," ").concat(p().toggleBtnIcon)})]})}),E&&(0,t.jsxs)("div",{className:p().advancedFilters,children:[(0,t.jsxs)("div",{className:p().filterRow,children:[(0,t.jsxs)("div",{className:p().filterField,children:[(0,t.jsx)("label",{className:p().filterLabel,children:"ID Servicio"}),(0,t.jsx)("input",{type:"text",value:S.id_servicio,onChange:e=>k({...S,id_servicio:e.target.value}),placeholder:"Buscar por ID",className:p().filterInput})]}),(0,t.jsxs)("div",{className:p().filterField,children:[(0,t.jsx)("label",{className:p().filterLabel,children:"Cliente"}),(0,t.jsx)("input",{type:"text",value:S.cliente,onChange:e=>k({...S,cliente:e.target.value}),placeholder:"Nombre del cliente",className:p().filterInput})]}),(0,t.jsxs)("div",{className:p().filterField,children:[(0,t.jsx)("label",{className:p().filterLabel,children:"Tipo de Convenio"}),(0,t.jsx)("input",{type:"text",value:S.tipo_convenio,onChange:e=>k({...S,tipo_convenio:e.target.value}),placeholder:"Tipo de convenio",className:p().filterInput})]})]}),(0,t.jsxs)("div",{className:p().filterRow,children:[(0,t.jsxs)("div",{className:p().filterField,children:[(0,t.jsx)("label",{className:p().filterLabel,children:"Tipo de Servicio"}),(0,t.jsx)("input",{type:"text",value:S.tipo_servicio,onChange:e=>k({...S,tipo_servicio:e.target.value}),placeholder:"Tipo de servicio",className:p().filterInput})]}),(0,t.jsxs)("div",{className:p().filterField,children:[(0,t.jsx)("label",{className:p().filterLabel,children:"Estado"}),(0,t.jsxs)("select",{value:S.estado,onChange:e=>k({...S,estado:e.target.value}),className:p().filterSelect,children:[(0,t.jsx)("option",{value:"",children:"Todos los estados"}),(0,t.jsx)("option",{value:"Pendiente",children:"Pendiente"}),(0,t.jsx)("option",{value:"Asignado",children:"Asignado"}),(0,t.jsx)("option",{value:"En Progreso",children:"En Progreso"}),(0,t.jsx)("option",{value:"Completado",children:"Completado"}),(0,t.jsx)("option",{value:"Cancelado",children:"Cancelado"})]})]}),(0,t.jsxs)("div",{className:p().filterField,children:[(0,t.jsx)("label",{className:p().filterLabel,children:"Operador"}),(0,t.jsx)("input",{type:"text",value:S.operador,onChange:e=>k({...S,operador:e.target.value}),placeholder:"Nombre del operador",className:p().filterInput})]})]}),(0,t.jsxs)("div",{className:p().filterRow,children:[(0,t.jsxs)("div",{className:p().filterField,children:[(0,t.jsx)("label",{className:p().filterLabel,children:"Fecha Desde"}),(0,t.jsx)("input",{type:"date",value:S.fecha_desde,onChange:e=>k({...S,fecha_desde:e.target.value}),className:p().filterInput})]}),(0,t.jsxs)("div",{className:p().filterField,children:[(0,t.jsx)("label",{className:p().filterLabel,children:"Fecha Hasta"}),(0,t.jsx)("input",{type:"date",value:S.fecha_hasta,onChange:e=>k({...S,fecha_hasta:e.target.value}),className:p().filterInput})]}),(0,t.jsxs)("div",{className:p().filterActions,children:[(0,t.jsxs)("button",{className:p().applyFiltersBtn,onClick:()=>{let e=[...a];if(S.id_servicio&&(e=e.filter(e=>{var a;return null==(a=e.id_servicio)?void 0:a.toString().includes(S.id_servicio)})),S.cliente&&(e=e.filter(e=>{var a;return null==(a=e.nombre_cliente)?void 0:a.toLowerCase().includes(S.cliente.toLowerCase())})),S.tipo_convenio&&(e=e.filter(e=>{var a;return null==(a=e.tipo_convenio)?void 0:a.toLowerCase().includes(S.tipo_convenio.toLowerCase())})),S.tipo_servicio&&(e=e.filter(e=>{var a;return null==(a=e.tipo_servicio)?void 0:a.toLowerCase().includes(S.tipo_servicio.toLowerCase())})),S.estado&&(e=e.filter(e=>{var a;return(null==(a=e.estado)?void 0:a.toLowerCase())===S.estado.toLowerCase()})),S.operador&&(e=e.filter(e=>{var a;return null==(a=e.nombre_operador)?void 0:a.toLowerCase().includes(S.operador.toLowerCase())})),S.fecha_desde){let a=new Date(S.fecha_desde);e=e.filter(e=>!!e.fecha_cotizacion&&new Date(e.fecha_cotizacion)>=a)}if(S.fecha_hasta){let a=new Date(S.fecha_hasta);a.setHours(23,59,59,999),e=e.filter(e=>!!e.fecha_cotizacion&&new Date(e.fecha_cotizacion)<=a)}c(e),y(1),H("info","Filtros aplicados","Se encontraron ".concat(e.length," resultados"))},children:[(0,t.jsx)("i",{className:"fas fa-filter"})," Aplicar Filtros"]}),(0,t.jsxs)("button",{className:p().clearFiltersBtn,onClick:()=>{k({id_servicio:"",cliente:"",tipo_convenio:"",tipo_servicio:"",estado:"",operador:"",fecha_desde:"",fecha_hasta:""}),w(""),A("todos"),c(a),y(1),H("info","Filtros limpiados","Se han restablecido todos los filtros")},children:[(0,t.jsx)("i",{className:"fas fa-times"})," Limpiar Filtros"]})]})]})]})]}),(0,t.jsx)("div",{className:p().sectionDivider}),(0,t.jsxs)("div",{className:p().tableContainer,children:[f&&(0,t.jsxs)("div",{className:p().errorMessage,children:[(0,t.jsx)("i",{className:"fas fa-exclamation-circle"})," ",f,(0,t.jsxs)("button",{onClick:q,className:p().retryButton,children:[(0,t.jsx)("i",{className:"fas fa-redo"})," Reintentar"]})]}),m?(0,t.jsxs)("div",{className:p().loading,children:[(0,t.jsx)("i",{className:"fas fa-spinner fa-spin"})," Cargando cotizaciones..."]}):0===s.length?(0,t.jsx)("div",{className:p().noData,children:"No hay cotizaciones que coincidan con los criterios de b\xfasqueda"}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("table",{className:p().table,children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:p().th,children:"ID servicio"}),(0,t.jsx)("th",{className:p().th,children:"Cliente"}),(0,t.jsx)("th",{className:p().th,children:"Tipo de convenio"}),(0,t.jsx)("th",{className:p().th,children:"Tipo de Servicio"}),(0,t.jsx)("th",{className:p().th,children:"Detalle"}),(0,t.jsx)("th",{className:p().th,children:"Estatus"}),(0,t.jsx)("th",{className:p().th,children:"Fecha Cotizaci\xf3n"}),(0,t.jsx)("th",{className:p().th,children:"Fecha Modificaci\xf3n"}),(0,t.jsx)("th",{className:p().th,children:"Operador"}),(0,t.jsx)("th",{className:p().th,children:"Acciones"})]})}),(0,t.jsx)("tbody",{children:Array.from(new Set(Q.map(e=>e.id_servicio))).map(e=>{let a=Q.find(a=>a.id_servicio===e);return(0,t.jsxs)("tr",{className:p().tr,children:[(0,t.jsx)("td",{className:p().td,children:a.id_servicio}),(0,t.jsx)("td",{className:p().td,children:a.nombre_cliente||"No disponible"}),(0,t.jsx)("td",{className:p().td,children:a.tipo_convenio||"No especificado"}),(0,t.jsx)("td",{className:p().td,children:a.tipo_servicio||"No especificado"}),(0,t.jsx)("td",{className:p().td,children:a.detalle_servicio||"Sin detalle"}),(0,t.jsx)("td",{className:"".concat(p().td," ").concat(p()["status".concat((a.estado||"pendiente").charAt(0).toUpperCase()+(a.estado||"pendiente").slice(1).toLowerCase())]),children:a.estado||"Pendiente"}),(0,t.jsx)("td",{className:p().td,children:a.fecha_cotizacion?new Date(a.fecha_cotizacion).toLocaleString():"Fecha no disponible"}),(0,t.jsx)("td",{className:p().td,children:a.fecha_modificacion?new Date(a.fecha_modificacion).toLocaleString():"Fecha no disponible"}),(0,t.jsx)("td",{className:p().td,children:a.nombre_operador||"No asignado"}),(0,t.jsx)("td",{className:p().td,children:(0,t.jsxs)("button",{onClick:()=>{C(a),x(!0)},className:p().btnAcciones,children:[(0,t.jsx)("i",{className:"fas fa-cog"})," Acciones"]})})]},a.id_servicio)})})]}),(0,t.jsx)("div",{className:p().pagination,children:(()=>{let e=[];if(e.push((0,t.jsx)("button",{className:"".concat(p().paginationBtn," ").concat(1===I?p().paginationBtnDisabled:""),onClick:()=>I>1&&G(I-1),disabled:1===I,children:(0,t.jsx)("i",{className:"fas fa-chevron-left"})},"prev")),D<=5)for(let a=1;a<=D;a++)e.push((0,t.jsx)("button",{className:"".concat(p().paginationBtn," ").concat(I===a?p().paginationBtnActive:""),onClick:()=>G(a),children:a},a));else{let a=Math.max(1,I-Math.floor(2.5)),i=Math.min(D,a+5-1);i-a<4&&(a=Math.max(1,i-5+1)),a>1&&(e.push((0,t.jsx)("button",{className:p().paginationBtn,onClick:()=>G(1),children:"1"},1)),a>2&&e.push((0,t.jsx)("span",{className:"".concat(p().paginationBtn," ").concat(p().paginationBtnDisabled),children:"..."},"ellipsis1")));for(let o=a;o<=i;o++)e.push((0,t.jsx)("button",{className:"".concat(p().paginationBtn," ").concat(I===o?p().paginationBtnActive:""),onClick:()=>G(o),children:o},o));i<D&&(i<D-1&&e.push((0,t.jsx)("span",{className:"".concat(p().paginationBtn," ").concat(p().paginationBtnDisabled),children:"..."},"ellipsis2")),e.push((0,t.jsx)("button",{className:p().paginationBtn,onClick:()=>G(D),children:D},D)))}return e.push((0,t.jsx)("button",{className:"".concat(p().paginationBtn," ").concat(I===D?p().paginationBtnDisabled:""),onClick:()=>I<D&&G(I+1),disabled:I===D,children:(0,t.jsx)("i",{className:"fas fa-chevron-right"})},"next")),e})()}),(0,t.jsxs)("div",{className:p().paginationInfo,children:["P\xe1gina ",I," de ",D]})]})]})]}),g&&z&&(0,t.jsx)(h.default,{isOpen:g,onClose:()=>x(!1),cotizacion:z,operadores:l,onAsignar:U,onIniciar:K,onCancelar:()=>Z("Cancelado"),onCompletar:X,onReasignarOperador:e=>U(e),onRecordarOperador:()=>handleReenviarMensaje()}),(0,t.jsx)("footer",{className:p().footer,children:e&&(0,t.jsxs)("div",{className:p().footerContent,children:[(0,t.jsxs)("p",{className:p().userInfo,children:[(0,t.jsx)("i",{className:"fas fa-user"})," ",e.displayName||"Nombre no disponible"]}),(0,t.jsxs)("p",{className:p().userEmail,children:[(0,t.jsx)("i",{className:"fas fa-envelope"})," ",e.email]})]})})]})}},9766:(e,a,i)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/cotizaciones",function(){return i(7073)}])}},e=>{e.O(0,[650,40,695,672,636,593,792],()=>e(e.s=9766)),_N_E=e.O()}]);