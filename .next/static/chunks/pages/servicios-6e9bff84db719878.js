(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[995],{1393:(e,s,i)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"default",{enumerable:!0,get:function(){return r}});let a=i(4232),o=a.useLayoutEffect,n=a.useEffect;function r(e){let{headManager:s,reduceComponentsToState:i}=e;function r(){if(s&&s.mountedInstances){let o=a.Children.toArray(Array.from(s.mountedInstances).filter(Boolean));s.updateHead(i(o,e))}}return o(()=>{var i;return null==s||null==(i=s.mountedInstances)||i.add(e.children),()=>{var i;null==s||null==(i=s.mountedInstances)||i.delete(e.children)}}),o(()=>(s&&(s._pendingUpdate=r),()=>{s&&(s._pendingUpdate=r)})),n(()=>(s&&s._pendingUpdate&&(s._pendingUpdate(),s._pendingUpdate=null),()=>{s&&s._pendingUpdate&&(s._pendingUpdate(),s._pendingUpdate=null)})),null}},4715:e=>{e.exports={navbar:"servicios_navbar__8G4q9",slideInLeft:"servicios_slideInLeft__9cyjk",scrolled:"servicios_scrolled__oodNU",navbarBrand:"servicios_navbarBrand__rkh_S",navLinks:"servicios_navLinks__rufti",scrolledNavLink:"servicios_scrolledNavLink__02E_u",menuToggle:"servicios_menuToggle__B6rdE",bar:"servicios_bar__pH3ji",scrolledBar:"servicios_scrolledBar__Y1P3D",activeBar1:"servicios_activeBar1___IXp_",activeBar2:"servicios_activeBar2__b17wu",activeBar3:"servicios_activeBar3__UULKQ",pageHeader:"servicios_pageHeader__FSppj",filter:"servicios_filter__YwIvU",headerContent:"servicios_headerContent__eB72Z",presentationTitle:"servicios_presentationTitle__A6GhT",presentationSubtitle:"servicios_presentationSubtitle__yQuLQ",notification:"servicios_notification__bwKyw",notificationSuccess:"servicios_notificationSuccess__8kTqh servicios_notification__bwKyw",notificationError:"servicios_notificationError__qFvBK servicios_notification__bwKyw",notificationWarning:"servicios_notificationWarning__eM8O7 servicios_notification__bwKyw",notificationContent:"servicios_notificationContent__5OkOa",alert:"servicios_alert__qxm_F",slideIn:"servicios_slideIn__dTokl",alertSuccess:"servicios_alertSuccess__l_OsN servicios_alert__qxm_F",alertError:"servicios_alertError__Fzq5S servicios_alert__qxm_F",alertWarning:"servicios_alertWarning__VxebO servicios_alert__qxm_F",modal:"servicios_modal__vAeIV",modalContent:"servicios_modalContent__BFCMd",loginHeader:"servicios_loginHeader__rU9L2",logoContainer:"servicios_logoContainer__hdKxj",modalLogo:"servicios_modalLogo__nLMRx",loginSubtitle:"servicios_loginSubtitle__nr_OP",closeBtn:"servicios_closeBtn__b9yF0",formContainer:"servicios_formContainer__px49V",inputGroup:"servicios_inputGroup__qdMd_",formControl:"servicios_formControl__bNN1V",recoveryToggle:"servicios_recoveryToggle__e81QA",loginBtn:"servicios_loginBtn__98GHW",googleBtn:"servicios_googleBtn__29I2w",divider:"servicios_divider__9k18N",stepsIndicator:"servicios_stepsIndicator__M17QV",step:"servicios_step__7lcHd",stepNumber:"servicios_stepNumber__VKbNH",stepActive:"servicios_stepActive__fkk3c",stepCompleted:"servicios_stepCompleted__1LIzz",stepTitle:"servicios_stepTitle__K_azc",stepConnector:"servicios_stepConnector__ynwvx",formStep:"servicios_formStep__Mya8b",stepHeading:"servicios_stepHeading__OP41G",formColumns:"servicios_formColumns__v6Vmf",formColumn:"servicios_formColumn__w8NUV",columnTitle:"servicios_columnTitle__DphTn",formRow:"servicios_formRow__095Fg",formGroupHalf:"servicios_formGroupHalf__sUDay",formGroup:"servicios_formGroup__sMydJ",inputWithIcon:"servicios_inputWithIcon__uvVED",searchContainer:"servicios_searchContainer__DvQnt",searchInput:"servicios_searchInput__RG9EP",predictionsContainer:"servicios_predictionsContainer__PhV1l",predictionItem:"servicios_predictionItem__IK_9W",clienteSeleccionado:"servicios_clienteSeleccionado__HfeOm",clienteCard:"servicios_clienteCard__K4tbD",clienteHeader:"servicios_clienteHeader__dRRkC",clienteDetails:"servicios_clienteDetails__Pserh",clienteItem:"servicios_clienteItem__O0sNQ",clienteId:"servicios_clienteId__PYraA",clienteNombre:"servicios_clienteNombre__k6229",clienteConvenio:"servicios_clienteConvenio__FjpRt",mapContainer:"servicios_mapContainer__2tbs_",googleMap:"servicios_googleMap__yIgsr",mapLoading:"servicios_mapLoading__94wz3",spinner:"servicios_spinner__Oahcr",spin:"servicios_spin__ZAcsK",routesContainer:"servicios_routesContainer__8Moxt",routesGrid:"servicios_routesGrid__GL_Sk",routeOption:"servicios_routeOption__ac4hw",routeOptionSelected:"servicios_routeOptionSelected__hdgcl servicios_routeOption__ac4hw",routeHeader:"servicios_routeHeader__lCz9x",selectedBadge:"servicios_selectedBadge__LPj73",routeDetails:"servicios_routeDetails__I34bF",routeDetail:"servicios_routeDetail__sIFEp",tollInfo:"servicios_tollInfo__yJTXF",faMoneyBill:"servicios_faMoneyBill__P9eWs",faCheck:"servicios_faCheck__ECLwV",confirmationContainer:"servicios_confirmationContainer__H8Xaz",confirmationSection:"servicios_confirmationSection__PVjbE",confirmationDetails:"servicios_confirmationDetails__NznMR",confirmationItem:"servicios_confirmationItem__TemR2",label:"servicios_label__5TKKQ",value:"servicios_value__jT5CO",formNavigation:"servicios_formNavigation__9A3Fp",backButton:"servicios_backButton__JN6YS",nextButton:"servicios_nextButton__3lFJc",calculateButton:"servicios_calculateButton__u_P_h",submitButton:"servicios_submitButton__4ez_5",buttonDisabled:"servicios_buttonDisabled__Rh7sv",footer:"servicios_footer__RPZCt",siteFooter:"servicios_siteFooter__ohanX",footerContent:"servicios_footerContent__mz_08",userInfo:"servicios_userInfo__UUxCL",userEmail:"servicios_userEmail__UcjQu",locationInputs:"servicios_locationInputs__fs8m4",similarRoutes:"servicios_similarRoutes__SjToG",mainContent:"servicios_mainContent__qHWt7",infoSection:"servicios_infoSection__qEzjP",servicesGrid:"servicios_servicesGrid__mMia7",serviceCard:"servicios_serviceCard__KXYZB",navLinksActive:"servicios_navLinksActive__BtH56 servicios_navLinks__rufti",menuToggleActive:"servicios_menuToggleActive__G9GNw"}},5645:(e,s,i)=>{"use strict";i.r(s),i.d(s,{default:()=>x});var a=i(7876),o=i(4232),n=i(6816),r=i(7328),t=i.n(r),c=i(3039),l=i(2945),d=i(9099),m=i(5003),_=i(7212),p=i(8919),u=i(4715),v=i.n(u);let h=new Date().toISOString().split("T")[0],f={id_cliente:"",n_folio:"",as_nombre:"",ap_paterno:"",ap_materno:"",as_rfc:"",as_telefono:"",marca:"",modelo:"",color:"",placas:"",fecha:h,direccion_origen:"",direccion_destino:""},x=()=>{let{user:e}=(0,c.A)();(0,d.useRouter)();let[s,i]=(0,o.useState)(f),[r,u]=(0,o.useState)({lat:18.9242,lng:-99.2216}),[x,j]=(0,o.useState)(null),[g,N]=(0,o.useState)([]),[b,w]=(0,o.useState)({distanceInKm:0,durationInMin:0}),[C,y]=(0,o.useState)(null),[I,S]=(0,o.useState)(!1),[k,P]=(0,o.useState)({origen:[],destino:[]}),[T,E]=(0,o.useState)(1),[H,M]=(0,o.useState)([]),[G,B]=(0,o.useState)(""),[D,A]=(0,o.useState)(null),[F,O]=(0,o.useState)(!1),[L,R]=(0,o.useState)({show:!1,message:"",type:"success"});(0,o.useEffect)(()=>{let e=()=>{let e=document.querySelector(".".concat(v().navbar));e&&(window.scrollY>50?e.classList.add(v().scrolled):e.classList.remove(v().scrolled))};return(async()=>{try{let e=await fetch("http://localhost:5000/api/catalogos/clientes",{method:"GET",headers:{"Content-Type":"application/json"}});if(!e.ok){if(500===e.status){console.error("Error interno del servidor al obtener clientes");let s=await e.json().catch(()=>({message:"Error desconocido del servidor"}));X("Error interno del servidor: ".concat(s.message||"Por favor contacte al administrador del sistema"),"error");return}throw Error("HTTP error! status: ".concat(e.status))}let s=await e.json();N(s)}catch(e){console.error("Error al obtener clientes:",e),e instanceof TypeError&&"Failed to fetch"===e.message?X("Error de conexi\xf3n: Verifica que el servidor est\xe9 ejecut\xe1ndose","error"):X("Error al obtener clientes. Por favor intente nuevamente m\xe1s tarde.","error")}})(),window.addEventListener("scroll",e),()=>window.removeEventListener("scroll",e)},[]),(0,o.useEffect)(()=>{let e=()=>{window.google&&window.google.maps?O(!0):setTimeout(e,100)};return e(),()=>{clearTimeout(e)}},[]);let q=async()=>{try{await (0,n.CI)(m.j),window.location.href="/"}catch(e){console.error("Error al cerrar sesi\xf3n:",e),X("Error al cerrar sesi\xf3n: "+(e instanceof Error?e.message:"Error desconocido"),"error")}},K=e=>{let{name:a,value:o}=e.target;i({...s,[a]:o})},W=(e,s)=>{if(!window.google||!window.google.maps||!window.google.maps.places)return void console.warn("Google Maps Places API not loaded yet");let i=new window.google.maps.places.AutocompleteService;e?i.getPlacePredictions({input:e,componentRestrictions:{country:"MX"}},(e,i)=>{i===window.google.maps.places.PlacesServiceStatus.OK&&e?P(i=>({...i,[s]:e})):P(e=>({...e,[s]:[]}))}):P(e=>({...e,[s]:[]}))},U=(e,a)=>{if(!window.google||!window.google.maps)return void X("Google Maps API no est\xe1 cargado completamente","warning");new window.google.maps.places.PlacesService(document.createElement("div")).getDetails({placeId:e.place_id,fields:["formatted_address","geometry"]},(o,n)=>{n===window.google.maps.places.PlacesServiceStatus.OK&&o?(i({...s,["origen"===a?"direccion_origen":"direccion_destino"]:o.formatted_address}),o.geometry&&o.geometry.location&&u({lat:o.geometry.location.lat(),lng:o.geometry.location.lng()})):i({...s,["origen"===a?"direccion_origen":"direccion_destino"]:e.description}),P(e=>({...e,[a]:[]}))})},z=async i=>{i.preventDefault();let a={...s,usuario:e.email,km:b.distanceInKm,minutos:b.durationInMin};try{let e=await fetch("http://localhost:5000/api/servicios",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!e.ok){let s=await e.json();throw Error(s.message||"Error desconocido al registrar el servicio")}let i=await e.json(),o={id_cliente:s.id_cliente,n_folio:s.n_folio,as_nombre:s.as_nombre,ap_paterno:s.ap_paterno,ap_materno:s.ap_materno,as_rfc:s.as_rfc,km:b.distanceInKm.toFixed(2),minutos:Math.round(b.durationInMin)},n="http://localhost:5000/api/servicios/pdf/".concat(i.id_servicio),r=await fetch(n,{method:"GET"});if(!r.ok){let e=await r.text();throw console.error("Error al obtener el PDF:",e),Error("Error al obtener el PDF")}let t=await r.blob(),c=window.URL.createObjectURL(t),l=document.createElement("a");l.href=c,l.setAttribute("download","acuse_".concat(s.id_cliente,".pdf")),document.body.appendChild(l),l.onclick=function(){setTimeout(()=>{console.log("Intentando redirigir a precotizaciones..."),window.location.href="/precotizaciones?".concat(new URLSearchParams(o).toString())},500)},l.click(),document.body.removeChild(l),X(i.message,"success")}catch(e){console.error("Error al registrar el servicio:",e),X("Error al registrar el servicio: "+(e instanceof Error?e.message:"Error desconocido"),"error")}},V=()=>{E(e=>e+1)},Q=()=>{E(e=>e-1)},X=(0,o.useCallback)(function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success";R({show:!0,message:e,type:s}),setTimeout(()=>{R({show:!1,message:"",type:"success"})},5e3)},[]),J=e=>{switch(e){case 1:return!!D;case 2:return s.n_folio&&s.as_nombre&&s.ap_paterno&&s.as_rfc&&s.as_telefono&&s.marca&&s.modelo&&s.color&&s.placas;case 3:return s.direccion_origen&&s.direccion_destino&&null!==C;default:return!0}};return(0,a.jsxs)("div",{children:[(0,a.jsxs)(t(),{children:[(0,a.jsx)("title",{children:"Servicios - AMA cuernavaca"}),(0,a.jsx)("link",{rel:"icon",href:"/img/ico2.ico",type:"image/x-icon"}),(0,a.jsx)("link",{href:"https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap",rel:"stylesheet"}),(0,a.jsx)("link",{href:"https://fonts.googleapis.com/icon?family=Material+Icons",rel:"stylesheet"}),(0,a.jsx)("link",{rel:"stylesheet",href:"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"})]}),(0,a.jsxs)("nav",{className:v().navbar,children:[(0,a.jsx)("a",{className:v().navbarBrand,href:"#",children:(0,a.jsx)("img",{src:"/img/logo.png",alt:"Logo AMA",className:v().modalLogo})}),(0,a.jsxs)("div",{className:"".concat(v().menuToggle," ").concat(I?v().menuToggleActive:""),onClick:()=>S(!I),children:[(0,a.jsx)("span",{}),(0,a.jsx)("span",{}),(0,a.jsx)("span",{})]}),(0,a.jsxs)("ul",{className:"".concat(v().navLinks," ").concat(I?v().navLinksActive:""),children:[(0,a.jsx)("li",{children:(0,a.jsx)("a",{href:"/cotizaciones",children:"Cotizaciones"})}),(0,a.jsx)("li",{children:(0,a.jsx)("a",{href:"#",onClick:q,children:"Salir"})})]})]}),(0,a.jsxs)("div",{className:v().pageHeader,children:[(0,a.jsx)("div",{className:v().backgroundImage}),(0,a.jsx)("div",{className:v().filter}),(0,a.jsx)("div",{className:v().headerContent,children:(0,a.jsx)("h1",{className:v().presentationTitle,children:"Servicios"})})]}),(0,a.jsx)(_.N,{children:L.show&&(0,a.jsx)(p.P.div,{className:"success"===L.type?v().notificationSuccess:"warning"===L.type?v().notificationWarning:v().notificationError,initial:{opacity:0,y:-50},animate:{opacity:1,y:0},exit:{opacity:0,y:-50},children:(0,a.jsxs)("div",{className:v().notificationContent,children:[(0,a.jsx)("i",{className:"fas ".concat("success"===L.type?"fa-check-circle":"warning"===L.type?"fa-exclamation-triangle":"fa-times-circle")}),(0,a.jsx)("p",{children:L.message})]})})}),(0,a.jsx)("section",{children:(0,a.jsxs)("div",{className:v().formContainer,children:[(0,a.jsxs)("div",{className:v().stepsIndicator,children:[(0,a.jsxs)("div",{className:"".concat(v().step," ").concat(T>=1?v().stepActive:""," ").concat(T>1?v().stepCompleted:""),onClick:()=>T>1&&E(1),children:[(0,a.jsx)("div",{className:v().stepNumber,children:"1"}),(0,a.jsx)("div",{className:v().stepTitle,children:"Cliente"})]}),(0,a.jsx)("div",{className:v().stepConnector}),(0,a.jsxs)("div",{className:"".concat(v().step," ").concat(T>=2?v().stepActive:""," ").concat(T>2?v().stepCompleted:""),onClick:()=>T>2&&E(2),children:[(0,a.jsx)("div",{className:v().stepNumber,children:"2"}),(0,a.jsx)("div",{className:v().stepTitle,children:"Datos"})]}),(0,a.jsx)("div",{className:v().stepConnector}),(0,a.jsxs)("div",{className:"".concat(v().step," ").concat(T>=3?v().stepActive:""," ").concat(T>3?v().stepCompleted:""),onClick:()=>T>3&&E(3),children:[(0,a.jsx)("div",{className:v().stepNumber,children:"3"}),(0,a.jsx)("div",{className:v().stepTitle,children:"Ruta"})]}),(0,a.jsx)("div",{className:v().stepConnector}),(0,a.jsxs)("div",{className:"".concat(v().step," ").concat(T>=4?v().stepActive:""),children:[(0,a.jsx)("div",{className:v().stepNumber,children:"4"}),(0,a.jsx)("div",{className:v().stepTitle,children:"Confirmar"})]})]}),(0,a.jsx)("form",{onSubmit:z,children:(0,a.jsxs)(_.N,{mode:"wait",children:[1===T&&(0,a.jsxs)(p.P.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},transition:{duration:.3},className:v().formStep,children:[(0,a.jsxs)("h2",{className:v().stepHeading,children:[(0,a.jsx)("i",{className:"fas fa-user-circle"})," Selecci\xf3n de Cliente"]}),(0,a.jsxs)("div",{className:v().formGroup,children:[(0,a.jsx)("label",{htmlFor:"busqueda_cliente",children:"Buscar Cliente"}),(0,a.jsxs)("div",{className:v().searchContainer,children:[(0,a.jsxs)("div",{className:v().inputWithIcon,children:[(0,a.jsx)("i",{className:"fas fa-search"}),(0,a.jsx)("input",{type:"text",id:"busqueda_cliente",placeholder:"Buscar por ID, nombre o tipo de convenio...",value:G,onChange:e=>(e=>{if(B(e),!e.trim())return void M([]);M(g.filter(s=>{var i;let a=e.toLowerCase(),o="".concat(s.nombre_cliente).toLowerCase(),n=s.id_cliente.toString(),r=(null==(i=s.tipo_convenio)?void 0:i.toLowerCase())||"";return o.includes(a)||n.includes(a)||r.includes(a)}).slice(0,10))})(e.target.value),className:v().searchInput,autoComplete:"off"})]}),H.length>0&&(0,a.jsx)("div",{className:v().predictionsContainer,children:H.map(e=>(0,a.jsx)(p.P.div,{className:v().predictionItem,onClick:()=>(e=>{i({...s,id_cliente:e.id_cliente}),A(e),B("".concat(e.id_cliente," - ").concat(e.nombre_cliente)),M([]),E(2)})(e),whileHover:{backgroundColor:"#f5f5f5",x:5},children:(0,a.jsxs)("div",{className:v().clienteItem,children:[(0,a.jsxs)("span",{className:v().clienteId,children:["#",e.id_cliente]}),(0,a.jsx)("span",{className:v().clienteNombre,children:e.nombre_cliente}),(0,a.jsx)("span",{className:v().clienteConvenio,children:e.tipo_convenio})]})},e.id_cliente))})]}),D&&(0,a.jsx)(p.P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:v().clienteSeleccionado,children:(0,a.jsxs)("div",{className:v().clienteCard,children:[(0,a.jsxs)("div",{className:v().clienteHeader,children:[(0,a.jsx)("i",{className:"fas fa-user-check"}),(0,a.jsx)("h3",{children:"Cliente Seleccionado"})]}),(0,a.jsxs)("div",{className:v().clienteDetails,children:[(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"ID:  "})," ",D.id_cliente]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Nombre:  "})," ",D.nombre_cliente]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Convenio:  "})," ",D.tipo_convenio]})]})]})})]}),(0,a.jsx)("div",{className:v().formNavigation,children:(0,a.jsxs)(p.P.button,{type:"button",className:v().nextButton,onClick:V,disabled:!J(1),whileHover:{scale:1.05},whileTap:{scale:.95},children:["Siguiente ",(0,a.jsx)("i",{className:"fas fa-arrow-right"})]})})]},"step1"),2===T&&(0,a.jsxs)(p.P.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},transition:{duration:.3},className:v().formStep,children:[(0,a.jsxs)("h2",{className:v().stepHeading,children:[(0,a.jsx)("i",{className:"fas fa-info-circle"})," Informaci\xf3n del Servicio"]}),(0,a.jsxs)("div",{className:v().formColumns,children:[(0,a.jsxs)("div",{className:v().formColumn,children:[(0,a.jsx)("h3",{className:v().columnTitle,children:"Datos del Solicitante"}),(0,a.jsxs)("div",{className:v().formGroup,children:[(0,a.jsx)("label",{htmlFor:"n_folio",children:"N\xfamero de folio"}),(0,a.jsxs)("div",{className:v().inputWithIcon,children:[(0,a.jsx)("i",{className:"fas fa-hashtag"}),(0,a.jsx)("input",{type:"text",id:"n_folio",name:"n_folio",value:s.n_folio,onChange:K,required:!0})]})]}),(0,a.jsxs)("div",{className:v().formGroup,children:[(0,a.jsx)("label",{htmlFor:"as_nombre",children:"Nombre del Solicitante"}),(0,a.jsxs)("div",{className:v().inputWithIcon,children:[(0,a.jsx)("i",{className:"fas fa-user"}),(0,a.jsx)("input",{type:"text",id:"as_nombre",name:"as_nombre",value:s.as_nombre,onChange:K,required:!0})]})]}),(0,a.jsxs)("div",{className:v().formRow,children:[(0,a.jsxs)("div",{className:"".concat(v().formGroup," ").concat(v().formGroupHalf),children:[(0,a.jsx)("label",{htmlFor:"ap_paterno",children:"Apellido Paterno"}),(0,a.jsx)("input",{type:"text",id:"ap_paterno",name:"ap_paterno",value:s.ap_paterno,onChange:K,required:!0})]}),(0,a.jsxs)("div",{className:"".concat(v().formGroup," ").concat(v().formGroupHalf),children:[(0,a.jsx)("label",{htmlFor:"ap_materno",children:"Apellido Materno"}),(0,a.jsx)("input",{type:"text",id:"ap_materno",name:"ap_materno",value:s.ap_materno,onChange:K,required:!0})]})]}),(0,a.jsxs)("div",{className:v().formRow,children:[(0,a.jsxs)("div",{className:"".concat(v().formGroup," ").concat(v().formGroupHalf),children:[(0,a.jsx)("label",{htmlFor:"as_rfc",children:"RFC"}),(0,a.jsxs)("div",{className:v().inputWithIcon,children:[(0,a.jsx)("i",{className:"fas fa-id-card"}),(0,a.jsx)("input",{type:"text",id:"as_rfc",name:"as_rfc",value:s.as_rfc,onChange:K,required:!0})]})]}),(0,a.jsxs)("div",{className:"".concat(v().formGroup," ").concat(v().formGroupHalf),children:[(0,a.jsx)("label",{htmlFor:"as_telefono",children:"Tel\xe9fono"}),(0,a.jsxs)("div",{className:v().inputWithIcon,children:[(0,a.jsx)("i",{className:"fas fa-phone"}),(0,a.jsx)("input",{type:"text",id:"as_telefono",name:"as_telefono",value:s.as_telefono,onChange:K,required:!0})]})]})]})]}),(0,a.jsxs)("div",{className:v().formColumn,children:[(0,a.jsx)("h3",{className:v().columnTitle,children:"Datos del Veh\xedculo"}),(0,a.jsxs)("div",{className:v().formRow,children:[(0,a.jsxs)("div",{className:"".concat(v().formGroup," ").concat(v().formGroupHalf),children:[(0,a.jsx)("label",{htmlFor:"marca",children:"Marca"}),(0,a.jsxs)("div",{className:v().inputWithIcon,children:[(0,a.jsx)("i",{className:"fas fa-car"}),(0,a.jsx)("input",{type:"text",id:"marca",name:"marca",value:s.marca,onChange:K,required:!0})]})]}),(0,a.jsxs)("div",{className:"".concat(v().formGroup," ").concat(v().formGroupHalf),children:[(0,a.jsx)("label",{htmlFor:"modelo",children:"Modelo"}),(0,a.jsx)("input",{type:"text",id:"modelo",name:"modelo",value:s.modelo,onChange:K,required:!0})]})]}),(0,a.jsxs)("div",{className:v().formRow,children:[(0,a.jsxs)("div",{className:"".concat(v().formGroup," ").concat(v().formGroupHalf),children:[(0,a.jsx)("label",{htmlFor:"color",children:"Color"}),(0,a.jsxs)("div",{className:v().inputWithIcon,children:[(0,a.jsx)("i",{className:"fas fa-palette"}),(0,a.jsx)("input",{type:"text",id:"color",name:"color",value:s.color,onChange:K,required:!0})]})]}),(0,a.jsxs)("div",{className:"".concat(v().formGroup," ").concat(v().formGroupHalf),children:[(0,a.jsx)("label",{htmlFor:"placas",children:"Placas"}),(0,a.jsxs)("div",{className:v().inputWithIcon,children:[(0,a.jsx)("i",{className:"fas fa-clipboard"}),(0,a.jsx)("input",{type:"text",id:"placas",name:"placas",value:s.placas,onChange:K,required:!0})]})]})]}),(0,a.jsxs)("div",{className:v().formGroup,children:[(0,a.jsx)("label",{htmlFor:"fecha",children:"Fecha del Servicio"}),(0,a.jsxs)("div",{className:v().inputWithIcon,children:[(0,a.jsx)("i",{className:"fas fa-calendar"}),(0,a.jsx)("input",{type:"date",id:"fecha",name:"fecha",value:s.fecha,onChange:K,min:h,required:!0})]})]})]})]}),(0,a.jsxs)("div",{className:v().formNavigation,children:[(0,a.jsxs)(p.P.button,{type:"button",className:v().backButton,onClick:Q,whileHover:{scale:1.05},whileTap:{scale:.95},children:[(0,a.jsx)("i",{className:"fas fa-arrow-left"})," Anterior"]}),(0,a.jsxs)(p.P.button,{type:"button",className:v().nextButton,onClick:V,disabled:!J(2),whileHover:{scale:1.05},whileTap:{scale:.95},children:["Siguiente ",(0,a.jsx)("i",{className:"fas fa-arrow-right"})]})]})]},"step2"),3===T&&(0,a.jsxs)(p.P.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},transition:{duration:.3},className:v().formStep,children:[(0,a.jsxs)("h2",{className:v().stepHeading,children:[(0,a.jsx)("i",{className:"fas fa-map-marked-alt"})," Selecci\xf3n de Ruta"]}),(0,a.jsxs)("div",{className:v().locationInputs,children:[(0,a.jsxs)("div",{className:v().formGroup,children:[(0,a.jsx)("label",{htmlFor:"direccion_origen",children:"Direcci\xf3n Origen"}),(0,a.jsxs)("div",{className:v().inputWithIcon,children:[(0,a.jsx)("i",{className:"fas fa-map-marker-alt"}),(0,a.jsx)("input",{type:"text",id:"direccion_origen",name:"direccion_origen",value:s.direccion_origen,onChange:e=>{K(e),W(e.target.value,"origen")},required:!0,placeholder:"Ingrese direcci\xf3n de origen"})]}),(0,a.jsx)("div",{className:v().predictionsContainer,children:k.origen.map((e,s)=>(0,a.jsxs)(p.P.div,{className:v().predictionItem,whileHover:{backgroundColor:"#f5f5f5",x:5},onClick:()=>U(e,"origen"),children:[(0,a.jsx)("i",{className:"fas fa-map-pin"})," ",e.description]},s))})]}),(0,a.jsxs)("div",{className:v().formGroup,children:[(0,a.jsx)("label",{htmlFor:"direccion_destino",children:"Direcci\xf3n Destino"}),(0,a.jsxs)("div",{className:v().inputWithIcon,children:[(0,a.jsx)("i",{className:"fas fa-flag-checkered"}),(0,a.jsx)("input",{type:"text",id:"direccion_destino",name:"direccion_destino",value:s.direccion_destino,onChange:e=>{K(e),W(e.target.value,"destino")},required:!0,placeholder:"Ingrese direcci\xf3n de destino"})]}),(0,a.jsx)("div",{className:v().predictionsContainer,children:k.destino.map((e,s)=>(0,a.jsxs)(p.P.div,{className:v().predictionItem,whileHover:{backgroundColor:"#f5f5f5",x:5},onClick:()=>U(e,"destino"),children:[(0,a.jsx)("i",{className:"fas fa-map-pin"})," ",e.description]},s))})]}),(0,a.jsxs)(p.P.button,{type:"button",className:v().calculateButton,onClick:()=>{if(s.direccion_origen&&s.direccion_destino){if(!window.google||!window.google.maps)return void X("Google Maps API no est\xe1 cargado completamente. Por favor, espere un momento.","warning");new window.google.maps.DirectionsService().route({origin:s.direccion_origen,destination:s.direccion_destino,travelMode:window.google.maps.TravelMode.DRIVING,provideRouteAlternatives:!0,avoidTolls:!1},(e,s)=>{s===window.google.maps.DirectionsStatus.OK?(j(e),y(0),w(e.routes.map(e=>{let s=e.legs[0];return{distanceInKm:s.distance.value/1e3,durationInMin:s.duration.value/60,hasTolls:e.warnings.some(e=>e.includes("peaje"))}})[0]),u(e.routes[0].legs[0].end_location),X("\xa1Ruta calculada exitosamente!","success")):(console.error("Error al obtener direcciones: ".concat(s)),X("No se pudo obtener la ruta. Verifica las direcciones.","error"))})}else X("Por favor, ingresa las direcciones de origen y destino.","warning")},disabled:!s.direccion_origen||!s.direccion_destino,whileHover:{scale:1.05},whileTap:{scale:.95},children:[(0,a.jsx)("i",{className:"fas fa-route"})," Calcular Ruta"]})]}),(0,a.jsxs)("div",{className:v().mapContainer,children:[(0,a.jsx)(l.aJ,{googleMapsApiKey:"AIzaSyCbZugvRs4fqITo75XougFZaDPz7mEfcDo",libraries:["places"],onLoad:()=>O(!0),loadingElement:(0,a.jsxs)("div",{className:v().mapLoading,children:[(0,a.jsx)("div",{className:v().spinner}),(0,a.jsx)("p",{children:"Cargando Google Maps..."})]}),children:(0,a.jsx)(l.u6,{mapContainerClassName:v().googleMap,center:r,zoom:10,options:{fullscreenControl:!0,mapTypeControl:!0,streetViewControl:!0,zoomControl:!0},children:x&&(0,a.jsx)(l.C,{directions:x,routeIndex:C,options:{polylineOptions:{strokeColor:"#f39c12",strokeWeight:5}}})})}),!F&&(0,a.jsxs)("div",{className:v().mapLoading,children:[(0,a.jsx)("div",{className:v().spinner}),(0,a.jsx)("p",{children:"Cargando mapa..."})]})]}),!x&&s.direccion_origen&&s.direccion_destino&&(0,a.jsxs)("div",{className:v().similarRoutes,children:[(0,a.jsx)("h3",{children:"Rutas similares:"}),(0,a.jsx)("p",{children:'Escriba las direcciones completas y presione "Calcular Ruta" para ver las opciones disponibles.'})]}),x&&x.routes&&(0,a.jsxs)(p.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:v().routesContainer,children:[(0,a.jsxs)("h3",{children:[(0,a.jsx)("i",{className:"fas fa-route"})," Rutas disponibles:"]}),(0,a.jsx)("div",{className:v().routesGrid,children:x.routes.map((e,s)=>(0,a.jsxs)(p.P.div,{className:C===s?v().routeOptionSelected:v().routeOption,whileHover:{scale:1.02,boxShadow:"0 8px 15px rgba(0,0,0,0.1)"},onClick:()=>{y(s),w({distanceInKm:e.legs[0].distance.value/1e3,durationInMin:e.legs[0].duration.value/60,hasTolls:e.warnings.some(e=>e.includes("peaje"))})},children:[(0,a.jsxs)("div",{className:v().routeHeader,children:[(0,a.jsxs)("h4",{children:["Ruta ",s+1]}),C===s&&(0,a.jsxs)("span",{className:v().selectedBadge,children:[(0,a.jsx)("i",{className:"fas fa-check-circle"})," Seleccionada"]})]}),(0,a.jsxs)("div",{className:v().routeDetails,children:[(0,a.jsxs)("div",{className:v().routeDetail,children:[(0,a.jsx)("i",{className:"fas fa-road"}),(0,a.jsxs)("span",{children:["Distancia: ",(e.legs[0].distance.value/1e3).toFixed(2)," km"]})]}),(0,a.jsxs)("div",{className:v().routeDetail,children:[(0,a.jsx)("i",{className:"fas fa-clock"}),(0,a.jsxs)("span",{children:["Tiempo estimado: ",Math.round(e.legs[0].duration.value/60)," minutos"]})]}),(0,a.jsxs)("div",{className:"".concat(v().routeDetail," ").concat(v().tollInfo),children:[(0,a.jsx)("i",{className:"fas ".concat(e.warnings.some(e=>e.includes("peaje"))?"fa-money-bill":"fa-check")}),(0,a.jsx)("span",{children:e.warnings.some(e=>e.includes("peaje"))?"Ruta con peaje":"Ruta sin peaje"})]})]})]},s))})]}),(0,a.jsxs)("div",{className:v().formNavigation,children:[(0,a.jsxs)(p.P.button,{type:"button",className:v().backButton,onClick:Q,whileHover:{scale:1.05},whileTap:{scale:.95},children:[(0,a.jsx)("i",{className:"fas fa-arrow-left"})," Anterior"]}),(0,a.jsxs)(p.P.button,{type:"button",className:v().nextButton,onClick:V,disabled:null===C,whileHover:{scale:1.05},whileTap:{scale:.95},children:["Siguiente ",(0,a.jsx)("i",{className:"fas fa-arrow-right"})]})]})]},"step3"),4===T&&(0,a.jsxs)(p.P.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},transition:{duration:.3},className:v().formStep,children:[(0,a.jsxs)("h2",{className:v().stepHeading,children:[(0,a.jsx)("i",{className:"fas fa-clipboard-check"})," Confirmaci\xf3n del Servicio"]}),(0,a.jsxs)("div",{className:v().confirmationContainer,children:[(0,a.jsxs)("div",{className:v().confirmationSection,children:[(0,a.jsxs)("h3",{children:[(0,a.jsx)("i",{className:"fas fa-user-circle"})," Informaci\xf3n del Cliente"]}),(0,a.jsxs)("div",{className:v().confirmationDetails,children:[(0,a.jsxs)("div",{className:v().confirmationItem,children:[(0,a.jsx)("span",{className:v().label,children:"ID Cliente: "}),(0,a.jsx)("span",{className:v().value,children:s.id_cliente})]}),(0,a.jsxs)("div",{className:v().confirmationItem,children:[(0,a.jsx)("span",{className:v().label,children:"Nombre: "}),(0,a.jsx)("span",{className:v().value,children:null==D?void 0:D.nombre_cliente})]}),(0,a.jsxs)("div",{className:v().confirmationItem,children:[(0,a.jsx)("span",{className:v().label,children:"Convenio: "}),(0,a.jsx)("span",{className:v().value,children:null==D?void 0:D.tipo_convenio})]})]})]}),(0,a.jsxs)("div",{className:v().confirmationSection,children:[(0,a.jsxs)("h3",{children:[(0,a.jsx)("i",{className:"fas fa-user"})," Informaci\xf3n del Solicitante"]}),(0,a.jsxs)("div",{className:v().confirmationDetails,children:[(0,a.jsxs)("div",{className:v().confirmationItem,children:[(0,a.jsx)("span",{className:v().label,children:"Nombre:  "}),(0,a.jsx)("span",{className:v().value,children:"".concat(s.as_nombre," ").concat(s.ap_paterno," ").concat(s.ap_materno)})]}),(0,a.jsxs)("div",{className:v().confirmationItem,children:[(0,a.jsx)("span",{className:v().label,children:"RFC:  "}),(0,a.jsx)("span",{className:v().value,children:s.as_rfc})]}),(0,a.jsxs)("div",{className:v().confirmationItem,children:[(0,a.jsx)("span",{className:v().label,children:"Tel\xe9fono:  "}),(0,a.jsx)("span",{className:v().value,children:s.as_telefono})]})]})]}),(0,a.jsxs)("div",{className:v().confirmationSection,children:[(0,a.jsxs)("h3",{children:[(0,a.jsx)("i",{className:"fas fa-car"})," Informaci\xf3n del Veh\xedculo"]}),(0,a.jsxs)("div",{className:v().confirmationDetails,children:[(0,a.jsxs)("div",{className:v().confirmationItem,children:[(0,a.jsx)("span",{className:v().label,children:"Marca:  "}),(0,a.jsx)("span",{className:v().value,children:s.marca})]}),(0,a.jsxs)("div",{className:v().confirmationItem,children:[(0,a.jsx)("span",{className:v().label,children:"Modelo:  "}),(0,a.jsx)("span",{className:v().value,children:s.modelo})]}),(0,a.jsxs)("div",{className:v().confirmationItem,children:[(0,a.jsx)("span",{className:v().label,children:"Color:  "}),(0,a.jsx)("span",{className:v().value,children:s.color})]}),(0,a.jsxs)("div",{className:v().confirmationItem,children:[(0,a.jsx)("span",{className:v().label,children:"Placas:  "}),(0,a.jsx)("span",{className:v().value,children:s.placas})]})]})]}),(0,a.jsxs)("div",{className:v().confirmationSection,children:[(0,a.jsxs)("h3",{children:[(0,a.jsx)("i",{className:"fas fa-map-marked-alt"})," Informaci\xf3n de la Ruta"]}),(0,a.jsxs)("div",{className:v().confirmationDetails,children:[(0,a.jsxs)("div",{className:v().confirmationItem,children:[(0,a.jsx)("span",{className:v().label,children:"Origen:  "}),(0,a.jsx)("span",{className:v().value,children:s.direccion_origen})]}),(0,a.jsxs)("div",{className:v().confirmationItem,children:[(0,a.jsx)("span",{className:v().label,children:"Destino:  "}),(0,a.jsx)("span",{className:v().value,children:s.direccion_destino})]}),(0,a.jsxs)("div",{className:v().confirmationItem,children:[(0,a.jsx)("span",{className:v().label,children:"Distancia:  "}),(0,a.jsxs)("span",{className:v().value,children:[b.distanceInKm.toFixed(2)," km"]})]}),(0,a.jsxs)("div",{className:v().confirmationItem,children:[(0,a.jsx)("span",{className:v().label,children:"Tiempo estimado:  "}),(0,a.jsxs)("span",{className:v().value,children:[Math.round(b.durationInMin)," minutos"]})]})]})]})]}),(0,a.jsxs)("div",{className:v().formNavigation,children:[(0,a.jsxs)(p.P.button,{type:"button",className:v().backButton,onClick:Q,whileHover:{scale:1.05},whileTap:{scale:.95},children:[(0,a.jsx)("i",{className:"fas fa-arrow-left"})," Anterior"]}),(0,a.jsxs)(p.P.button,{type:"submit",className:v().submitButton,whileHover:{scale:1.05},whileTap:{scale:.95},children:[(0,a.jsx)("i",{className:"fas fa-check-circle"})," Registrar Servicio"]})]})]},"step4")]})})]})}),(0,a.jsx)("footer",{className:v().footer,children:e&&(0,a.jsxs)("div",{className:v().footerContent,children:[(0,a.jsxs)("p",{className:v().userInfo,children:[(0,a.jsx)("i",{className:"fas fa-user"})," ",e.displayName||"Nombre no disponible"]}),(0,a.jsxs)("p",{className:v().userEmail,children:[(0,a.jsx)("i",{className:"fas fa-envelope"})," ",e.email]})]})})]})}},5648:(e,s)=>{"use strict";function i(e){let{ampFirst:s=!1,hybrid:i=!1,hasQuery:a=!1}=void 0===e?{}:e;return s||i&&a}Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"isInAmpMode",{enumerable:!0,get:function(){return i}})},6416:(e,s,i)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/servicios",function(){return i(5645)}])},7328:(e,s,i)=>{e.exports=i(9836)},9099:(e,s,i)=>{e.exports=i(8253)},9836:(e,s,i)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),!function(e,s){for(var i in s)Object.defineProperty(e,i,{enumerable:!0,get:s[i]})}(s,{default:function(){return v},defaultHead:function(){return m}});let a=i(4252),o=i(8365),n=i(7876),r=o._(i(4232)),t=a._(i(1393)),c=i(9896),l=i(6834),d=i(5648);function m(e){void 0===e&&(e=!1);let s=[(0,n.jsx)("meta",{charSet:"utf-8"},"charset")];return e||s.push((0,n.jsx)("meta",{name:"viewport",content:"width=device-width"},"viewport")),s}function _(e,s){return"string"==typeof s||"number"==typeof s?e:s.type===r.default.Fragment?e.concat(r.default.Children.toArray(s.props.children).reduce((e,s)=>"string"==typeof s||"number"==typeof s?e:e.concat(s),[])):e.concat(s)}i(546);let p=["name","httpEquiv","charSet","itemProp"];function u(e,s){let{inAmpMode:i}=s;return e.reduce(_,[]).reverse().concat(m(i).reverse()).filter(function(){let e=new Set,s=new Set,i=new Set,a={};return o=>{let n=!0,r=!1;if(o.key&&"number"!=typeof o.key&&o.key.indexOf("$")>0){r=!0;let s=o.key.slice(o.key.indexOf("$")+1);e.has(s)?n=!1:e.add(s)}switch(o.type){case"title":case"base":s.has(o.type)?n=!1:s.add(o.type);break;case"meta":for(let e=0,s=p.length;e<s;e++){let s=p[e];if(o.props.hasOwnProperty(s))if("charSet"===s)i.has(s)?n=!1:i.add(s);else{let e=o.props[s],i=a[s]||new Set;("name"!==s||!r)&&i.has(e)?n=!1:(i.add(e),a[s]=i)}}}return n}}()).reverse().map((e,s)=>{let i=e.key||s;return r.default.cloneElement(e,{key:i})})}let v=function(e){let{children:s}=e,i=(0,r.useContext)(c.AmpStateContext),a=(0,r.useContext)(l.HeadManagerContext);return(0,n.jsx)(t.default,{reduceComponentsToState:u,headManager:a,inAmpMode:(0,d.isInAmpMode)(i),children:s})};("function"==typeof s.default||"object"==typeof s.default&&null!==s.default)&&void 0===s.default.__esModule&&(Object.defineProperty(s.default,"__esModule",{value:!0}),Object.assign(s.default,s),e.exports=s.default)},9896:(e,s,i)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"AmpStateContext",{enumerable:!0,get:function(){return a}});let a=i(4252)._(i(4232)).default.createContext({})}},e=>{e.O(0,[759,650,636,593,792],()=>e(e.s=6416)),_N_E=e.O()}]);